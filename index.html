<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="记录一些技术点，留下一些生活感悟">
<meta property="og:type" content="website">
<meta property="og:title" content="这里有我的脚丫印😄">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="这里有我的脚丫印😄">
<meta property="og:description" content="记录一些技术点，留下一些生活感悟">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="这里有我的脚丫印😄">
<meta name="twitter:description" content="记录一些技术点，留下一些生活感悟">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>这里有我的脚丫印😄</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">这里有我的脚丫印😄</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">程序媛</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/30/Rails-曾经迷惑的小知识二/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/30/Rails-曾经迷惑的小知识二/" itemprop="url">Rails 曾经迷惑的小知识二</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-30T19:27:52+08:00">
                2017-11-30
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/30/Rails-曾经迷惑的小知识二/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/30/Rails-曾经迷惑的小知识二/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>以下都是参考自：<a href="https://ihower.tw/rails/" target="_blank" rel="external">Ruby on Rails 实战圣经</a>，里面有很多好用的小知识，也是曾经走过的坑，一点点知道的，这里面给整理的很好。（因为部署在台湾吧，所以加载很慢，等等就会加载出来网页了）</p>
<h2 id="Unobtrusive-JavaScript"><a href="#Unobtrusive-JavaScript" class="headerlink" title="Unobtrusive JavaScript"></a>Unobtrusive JavaScript</h2><p>Rails 使用一种叫做 <code>Unobtrusive JavaScript(UJS)</code> 的方式來加载內建的 JavaScript 功能，也就是你在 <code>app/assets/javascripts/application.js</code> 里面载入的 <code>//= require jquery_ujs</code>，这些功能包括</p>
<ul>
<li>让超链接可以用 <code>:method</code> 参数支援非 GET 方法</li>
<li>用超链接、按钮和表单可以用 <code>remote: true</code> 支援 Ajax</li>
<li>超链接、按钮和表单可以用 <code>data-confirm</code> 参数可以弹出确认对话框</li>
<li>送出按钮可以用 <code>data-disable-with</code> 参数在送出表单时暂时关闭按钮避免重复发送</li>
</ul>
<p>什么是 <code>Unobtrusive</code> 呢？用个例子來说吧，以下代码会将超链接改成用表单 <code>DELETE</code> 送出，并且用一个提示弹窗来作确认：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">link_to &apos;Remove&apos;, event_path(1), :method =&gt; :delete, :data =&gt; &#123; :confirm =&gt; &quot;Sure?&quot; &#125;</div></pre></td></tr></table></figure>
<p>在Rails 3以前的版本，会输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;a onclick=&quot;if (confirm(&apos;Sure?&apos;)) &#123; var f = document.createElement(&apos;form&apos;); f.style.display = &apos;none&apos;; this.parentNode.appendChild(f); f.method = &apos;POST&apos;; f.action = this.href;var m = document.createElement(&apos;input&apos;); m.setAttribute(&apos;type&apos;, &apos;hidden&apos;); m.setAttribute(&apos;name&apos;, &apos;_method&apos;); m.setAttribute(&apos;value&apos;, &apos;delete&apos;); f.appendChild(m);f.submit(); &#125;;return false;&quot; href=&quot;/events/1&quot;&gt;Remove&lt;/a&gt;</div></pre></td></tr></table></figure>
<p>在 <code>Rails 3</code> 之后，会输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;a rel=&quot;nofollow&quot; data-confirm=&quot;Sure?&quot; data-method=&quot;delete&quot; class=&quot;delete&quot; href=&quot;/events/1&quot;&gt;Remove&lt;/a&gt;</div></pre></td></tr></table></figure>
<p><code>Unobtrusive</code> 也就是将 <code>JavaScript</code> 程式与HTML完全分开，除了可以让HTML代码干净之外，也可以支援更换不同的 <code>JavaScript Library</code>，例如把 <code>Rails</code> 內建的 <code>jQuery</code> 換成 <code>Protytype.js</code> 或 <code>angular.js</code> 等等。</p>
<p><strong>在 <code>Layout</code> 中有輸出一段 <code>&lt;%= csrf_meta_tag %&gt;</code> 的作用就是搭配给 <code>UJS</code> 使用的，让 <code>JavaScript</code> 可以拿到 <code>CSRF</code> 安全验证码。</strong></p>
<h2 id="j-是-escape-javascript-的缩写"><a href="#j-是-escape-javascript-的缩写" class="headerlink" title="j() 是 escape_javascript() 的缩写"></a><code>j()</code> 是 <code>escape_javascript()</code> 的缩写</h2><h2 id="Ajax-的三种使用方式"><a href="#Ajax-的三种使用方式" class="headerlink" title="Ajax 的三种使用方式"></a>Ajax 的三种使用方式</h2><p><code>Ajax</code> 是 <code>Asynchronous JavaScript and XML</code> 的缩写，是一种不需要重新整理页面，通过 <code>JavaScript</code> 来与服务器交换资料、更新网页內容的技术。目的在于改善使用者的操作界面，提升流畅度。它主要是通过浏览器提供的 <code>XMLHttpRequestObject</code> 来达成，不过因为要支援跨浏览器，大多数人們会选择使用 <code>JavaScript Library</code> 来处理 <code>Ajax</code>，例如最流行的 <code>JQuery</code>。</p>
<p>总体来说，依照 <code>Ajax</code> 使用的格式分类，有三种方式：</p>
<p>向服务器请求 <code>HTML</code> 片段，然后客户端浏览器上的 <code>JavaScript</code> 再替换掉页面上的元素<br>向服务器请求 <code>JavaScript</code> 程式脚本，然后客户端浏览器执行它<br>向服务器请求 <code>JSON</code> 或 <code>XML</code> 资料格式，然后客户端浏览器的 <code>JavaScript</code> 解析后再动作。</p>
<p>具体三种方式请参考：<a href="https://ihower.tw/rails/ajax.html" target="_blank" rel="external">Ajax 應用程式</a> 很详细。</p>
<h2 id="其他实用的方法"><a href="#其他实用的方法" class="headerlink" title="其他实用的方法"></a>其他实用的方法</h2><p><code>pluralize</code> 方法可以帮我们将名词字串转为复数的名词:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">"table"</span>.pluralize     <span class="comment"># =&gt; "tables"</span></div><div class="line"><span class="string">"ruby"</span>.pluralize      <span class="comment"># =&gt; "rubies"</span></div><div class="line"><span class="string">"equipment"</span>.pluralize <span class="comment"># =&gt; "equipment"</span></div></pre></td></tr></table></figure>
<p>而 <code>singularize</code> 方法则是可以帮我们转为单数:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">"tables"</span>.singularize    <span class="comment"># =&gt; "table"</span></div><div class="line"><span class="string">"rubies"</span>.singularize    <span class="comment"># =&gt; "ruby"</span></div><div class="line"><span class="string">"equipment"</span>.singularize <span class="comment"># =&gt; "equipment"</span></div></pre></td></tr></table></figure>
<p><code>camelize</code> 可以帮我们将字串转为驼峰式的字串:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">"product"</span>.camelize    <span class="comment"># =&gt; "Product"</span></div><div class="line"><span class="string">"admin_user"</span>.camelize <span class="comment"># =&gt; "AdminUser"</span></div></pre></td></tr></table></figure>
<p>在 <code>Rails</code> 中也会将路径中 <code>”/”</code> 符号转为 <code>Class</code> 及 <code>Module</code> 中的命名空间符号::</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">"backoffice/session"</span>.camelize <span class="comment"># =&gt; "Backoffice::Session"</span></div></pre></td></tr></table></figure>
<p>而 <code>underscore</code> 则是将原先驼峰式的字串转为路径式的字串:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">"Product"</span>.underscore   <span class="comment"># =&gt; "product"</span></div><div class="line"><span class="string">"AdminUser"</span>.underscore <span class="comment"># =&gt; "admin_user"</span></div><div class="line"><span class="string">"Backoffice::Session"</span>.underscore <span class="comment"># =&gt; "backoffice/session"</span></div></pre></td></tr></table></figure>
<p><code>titleize</code> 方法可以将字串标题化，将单字的开头皆转为大写:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">"alice in wonderland"</span>.titleize <span class="comment"># =&gt; "Alice In Wonderland"</span></div><div class="line"><span class="string">"fermat's enigma"</span>.titleize     <span class="comment"># =&gt; "Fermat's Enigma"</span></div></pre></td></tr></table></figure>
<p><code>dasherize</code> 可以将字串中的底线转为横线:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">"name"</span>.dasherize         <span class="comment"># =&gt; "name"</span></div><div class="line"><span class="string">"contact_data"</span>.dasherize <span class="comment"># =&gt; "contact-data"</span></div></pre></td></tr></table></figure>
<p><code>demodulize</code> 可以将整串的 <code>namespace</code> 去除仅留下最后的 <code>Class name</code> 或是 <code>Module name</code> :</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">"Backoffice::UsersController"</span>.demodulize    <span class="comment"># =&gt; "UsersController"</span></div><div class="line"><span class="string">"Admin::Hotel::ReservationUtils"</span>.demodulize <span class="comment"># =&gt; "ReservationUtils"</span></div></pre></td></tr></table></figure>
<p><code>deconstantize</code> 则是相反的作用，将上层的部分全部找出来:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">"Backoffice::UsersController"</span>.deconstantize    <span class="comment"># =&gt; "Backoffice"</span></div><div class="line"><span class="string">"Admin::Hotel::ReservationUtils"</span>.deconstantize <span class="comment"># =&gt; "Admin::Hotel"</span></div></pre></td></tr></table></figure>
<p>必须注意的是这是处理字串，因此若直接仅给予 <code>Class name</code> 或是 <code>Module name</code> 是无法找出上层参照的</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">"Product"</span>.deconstantize  <span class="comment"># =&gt; ""</span></div></pre></td></tr></table></figure>
<p><code>parameterize</code> 可以将字串转为适合 <code>url</code> 的方式:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">"John Smith"</span>.parameterize <span class="comment"># =&gt; "john-smith"</span></div><div class="line"><span class="string">"Kurt Gödel"</span>.parameterize <span class="comment"># =&gt; "kurt-godel"</span></div></pre></td></tr></table></figure>
<p><code>tableize</code> 除了会将单数名词转为复数之外，还会将驼峰式的名词改为底线:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">"InvoiceLine"</span>.tableize <span class="comment"># =&gt; "invoice_lines"</span></div></pre></td></tr></table></figure>
<p><code>tableize</code> 的作用其实在于帮助你找出 <code>Model</code> 的资料表名称</p>
<p><code>classify</code> 则是 <code>tableize</code> 的相反，能够帮你从资料表的名称转为 <code>Model</code> :</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">"people"</span>.classify        <span class="comment"># =&gt; "Person"</span></div><div class="line"><span class="string">"invoices"</span>.classify      <span class="comment"># =&gt; "Invoice"</span></div><div class="line"><span class="string">"invoice_lines"</span>.classify <span class="comment"># =&gt; "InvoiceLine"</span></div></pre></td></tr></table></figure>
<p><code>humanize</code> 可以帮你将Model的属性转为较容易阅读的形式:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">"name"</span>.humanize           <span class="comment"># =&gt; "Name"</span></div><div class="line"><span class="string">"author_id"</span>.humanize      <span class="comment"># =&gt; "Author"</span></div><div class="line"><span class="string">"comments_count"</span>.humanize <span class="comment"># =&gt; "Comments count"</span></div></pre></td></tr></table></figure>
<h2 id="扩充-Enumerable"><a href="#扩充-Enumerable" class="headerlink" title="扩充 Enumerable"></a>扩充 Enumerable</h2><p><strong><code>index_by</code></strong><br><code>index_by</code> 可以帮我们将集合元素以指定的栏位做为键值整理成 <code>Hash</code> :</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">invoices.index_by(&amp;<span class="symbol">:number</span>)</div><div class="line"><span class="comment"># =&gt; &#123;'2009-032' =&gt; &lt;Invoice ...&gt;, '2009-008' =&gt; &lt;Invoice ...&gt;, ...&#125;</span></div><div class="line">键值通常必须是唯一的，若不是唯一的话将会以最后出现的元素做为判断值。</div></pre></td></tr></table></figure>
<p><strong><code>many?</code></strong><br><code>many?</code> 是可个好用的方法可以帮助我们快速的判断集合的数量是否大于1:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;% <span class="keyword">if</span> pages.many? %&gt;</div><div class="line">  &lt;%= pagination_links %&gt;</div><div class="line">&lt;% <span class="keyword">end</span> %&gt;</div></pre></td></tr></table></figure>
<p>如果对 <code>many?</code> 传入区块运算时，<code>many?</code> 仅会回传运算结果是true的结果:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@see_more = videos.many? &#123;<span class="params">|video|</span> video.category == params[<span class="symbol">:category</span>]&#125;</div></pre></td></tr></table></figure>
<h2 id="还有些实用的小方法，抄过来太多了，请查看-ActiveSupport-工具函式库"><a href="#还有些实用的小方法，抄过来太多了，请查看-ActiveSupport-工具函式库" class="headerlink" title="还有些实用的小方法，抄过来太多了，请查看 ActiveSupport - 工具函式库"></a>还有些实用的小方法，抄过来太多了，请查看 <a href="https://ihower.tw/rails/activesupport.html" target="_blank" rel="external">ActiveSupport - 工具函式库</a></h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/29/Rails-曾经迷惑的小知识一/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/29/Rails-曾经迷惑的小知识一/" itemprop="url">Rails 曾经迷惑的小知识一</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-29T22:51:59+08:00">
                2017-11-29
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/29/Rails-曾经迷惑的小知识一/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/29/Rails-曾经迷惑的小知识一/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>以下都是参考自：<a href="https://ihower.tw/rails/" target="_blank" rel="external">Ruby on Rails 实战圣经</a>，里面有很多好用的小知识，也是曾经走过的坑，一点点知道的，这里面给整理的很好。已经一字不差的读到 Part 2 第 10 个了，接下来继续。因为都是地铁上看的，所以，就今天摘了一些我曾经迷惑过的小知识下来。</p>
<ol>
<li><code>&lt;%- -%&gt;</code> 有什么作用？</li>
</ol>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;% @people.each <span class="keyword">do</span> <span class="params">|person|</span> %&gt;</div><div class="line">  &lt;% <span class="keyword">if</span> person.name.present? %&gt;</div><div class="line">    &lt;p&gt;&lt;%= person.name %&gt;&lt;<span class="regexp">/p&gt;</span></div><div class="line"><span class="regexp">  &lt;% end %&gt;</span></div><div class="line"><span class="regexp">&lt;% end %&gt;</span></div></pre></td></tr></table></figure>
<p>上述的 <code>&lt;% %&gt;</code> 标签虽然不会输出 <code>HTML</code> 內容，但是还是在 <code>HTML</code> 原始码中换行了，为了避免输出時多余的換行，可以改用 <code>&lt;%- -%&gt;</code>。不过实际上并沒有很多人在乎就是了，毕竟这不影响用户的页面。</p>
<ol>
<li>设定 layout</li>
</ol>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Controller 设定 layout</span></div><div class="line">layout <span class="string">"special"</span>, <span class="symbol">only:</span> <span class="symbol">:index</span></div><div class="line">layout <span class="string">"special"</span>, <span class="symbol">except:</span> [<span class="symbol">:show</span>, <span class="symbol">:edit</span>, <span class="symbol">:new</span>]</div><div class="line"></div><div class="line"><span class="comment"># Action 中设定 layout</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span></span></div><div class="line">  @event = Event.find(params[<span class="symbol">:id</span>])</div><div class="line">	render <span class="symbol">layout:</span> <span class="string">"foobar"</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<ol>
<li>Collection</li>
</ol>
<p>如果是列表集合，像是 <code>tr</code> 或 <code>li</code> 這类会一直重复的 <code>Template</code> 元素，我们可以使用<code>collection</code> 参数來处理，例如像以下的程式：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;ul&gt;</div><div class="line">  &lt;% @people.each <span class="keyword">do</span> <span class="params">|person|</span> %&gt;</div><div class="line">    &lt;%= render <span class="symbol">:partial</span> =&gt; <span class="string">"person"</span>, <span class="symbol">:locals</span> =&gt; &#123; <span class="symbol">:person</span> =&gt; person &#125; %&gt;</div><div class="line">  &lt;% <span class="keyword">end</span> %&gt;</div><div class="line">&lt;ul&gt;</div></pre></td></tr></table></figure>
<p>我們可以改写成使用 <code>collection</code> 参数來支援列表集合：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;ul&gt;</div><div class="line">  &lt;%= render <span class="symbol">:partial</span> =&gt; <span class="string">"person"</span>, <span class="symbol">:collection</span> =&gt; @people, <span class="symbol">:as</span> =&gt; <span class="symbol">:person</span> %&gt;</div><div class="line">&lt;ul&gt;</div></pre></td></tr></table></figure>
<p>在 <code>_person.html.erb</code> 這個 <code>partial</code> 中，会有有一个额外的索引变量 <code>person_counter</code> 记录编号。</p>
<p>使用 <code>collection</code> 的好处不只是少打字而已，还有执行效能上的大大改善，<code>Rails</code> 內部会针对这种形式做执行效率最佳化。</p>
<ol>
<li>Helper<br>因为 <code>Helper</code> 预设只能在 <code>Template</code> 中使用，如果想在 <code>rails console</code> 中呼叫，必须加上 <code>helper</code>，例如 <code>helper.link_to</code>。另外，虽然机会不多，<strong>如果真的要在Rails Controller或Model程式中呼叫Helper，则可以加上ApplicationController.helpers前置词</strong>。</li>
</ol>
<p><strong>Helper是全域的，定义在哪一个档案中没有关系，档案名称也不需要与Controller名称对应。</strong></p>
<ol>
<li>静态档案辅助方法<br>使用 <code>Rails</code> 内建的静态档案(Assets)辅助方法有几个好处：</li>
</ol>
<p><code>Rails</code> 会合并 <code>Stylesheet</code> 和 <code>JavasSript</code> 档案，可以加速浏览器的下载。<br><code>Rails</code> 会编译 <code>Sass</code> 和 <code>CoffeeScript</code> 等透过 <code>Assets template engine</code> 产生的 <code>Stylesheet</code> 和 <code>JavasSript</code><br><code>Rails</code> 会在静态档案网址中加上时间序号，如果内容有修改则会重新产生。这样的好处是强迫用户的浏览器一定会下载到最新的版本，而不会有浏览器快取到旧版本的问题。<br>变更 <code>Assets host</code> 主机位址时，可以一次搞定，例如上 <code>CDN</code> 时。透过 <code>Helpers</code>，<code>Rails</code> 可以帮所有的 <code>Assets</code> 加上静态档案伺服器网址。<br>几个常用的方法：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">javascript_include_tag</div><div class="line">stylesheet_link_tag</div><div class="line">auto_discovery_link_tag</div><div class="line">favicon_link_tag</div><div class="line">image_tag</div><div class="line">video_tag</div><div class="line">audio_tag</div></pre></td></tr></table></figure>
<ol>
<li>格式化辅助方法<br><strong>simple_format</strong><br>将<code>\n</code>换行字元换成HTML的<code>&lt;br&gt;</code>标签。在表单输入的<code>&lt;textarea&gt;&lt;/textarea&gt;</code>中，换行其实是<code>\n</code>控制字元，因此输出在网页上时，<code>\n</code>代表的是在HTML原始码中换行，因此我们经常需要将<code>\n</code>再换成<code>&lt;br&gt;</code>标签，这样浏览器看到的画面才有换行的呈现。</li>
</ol>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;%= simple_format(<span class="string">"foo\nbar"</span>) %&gt; <span class="comment"># 輸出 "&lt;p&gt;foo\n&lt;br /&gt;bar&lt;/p&gt;"</span></div></pre></td></tr></table></figure>
<p><strong>truncate 截取前几个字符</strong></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;%= truncate(<span class="string">"Once upon a time in a world far far away"</span>) %&gt;</div><div class="line"><span class="comment"># 輸出 "Once upon a time in a world..."</span></div><div class="line">&lt;%= truncate(<span class="string">"Once upon a time in a world far far away"</span>, <span class="symbol">length:</span> <span class="number">17</span>) %&gt;</div><div class="line"><span class="comment"># 輸出 "Once upon a ti..."</span></div></pre></td></tr></table></figure>
<p><strong>strip_tags</strong><br>移除HTML标签</p>
<p><strong>strip_links</strong><br>移除HTML超连结标签</p>
<p><strong>distance_of_time_in_words</strong><br>输出很酷的时间距离，例如</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">distance_of_time_in_words(Time.now, Time.now + <span class="number">60</span>.minutes)</div><div class="line">=&gt; <span class="string">"about 1 hour"</span></div><div class="line">distance_of_time_in_words_to_now</div><div class="line">distance_of_time_in_words_to_now(Time.now - <span class="number">1</span>.second)</div><div class="line">=&gt; <span class="string">"less than a minute"</span></div></pre></td></tr></table></figure>
<p><strong>time_tag</strong><br>输出HTML5时间标签</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">time_tag(Time.now)</div><div class="line">=&gt; <span class="string">"&lt;time datetime=\"2014-11-03T23:55:11+08:00\"&gt;November 03, 2014 23:55&lt;/time&gt;"</span></div></pre></td></tr></table></figure>
<p><strong>number_with_delimiter</strong></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">number_with_delimiter(<span class="number">1234567</span>)</div><div class="line">=&gt; <span class="string">"1,234,567"</span></div><div class="line">number_with_precision</div><div class="line">number_with_precision(<span class="number">123.4567</span>, <span class="symbol">precision:</span> <span class="number">2</span>)</div><div class="line">=&gt; <span class="string">"123.46"</span></div></pre></td></tr></table></figure>
<ol>
<li>URL辅助方法<br><code>link_to</code> 文字超连结<br>除了学过的 <code>&lt;%= link_to &#39;超連結文字&#39;, xxx_path %&gt;</code> 用法之外，如果超连结文字很多甚至有图片，可以用 <code>block</code> 的方式改写，例如：</li>
</ol>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;%= link_to user_path(user) <span class="keyword">do</span> %&gt;</div><div class="line">  &lt;%= image_tag user.avatar.url %&gt; &lt;%= user.display_name %&gt;</div><div class="line">&lt;% <span class="keyword">end</span> %&gt;</div></pre></td></tr></table></figure>
<p><code>mail_to</code> E-mail<br><code>button_to</code> 按钮连结，这个预设会改用POST出去(实际是个只有按钮的表单)。因此如果超连结有用 <code>method: :post</code> 等非GET方法时，建议可以考虑改用 <code>button_to</code>而不是 <code>link_to</code>，这样在JavaScript失效的情况下仍然可以作用，满足网页无障碍的标准。<br><code>current_page?(url)</code> 是否目前是url这个页面，通常是在 <code>layout</code> 上搭配 <code>tab</code> 样式做 <code>active</code> 效果</p>
<ol>
<li>表单辅助方法<br><code>select</code><br>使用 <code>select</code> 有一个坑：如果你要加 <code>class</code> 的话，必须这样写 <code>f.select :xxx, {}, :class =&gt; &quot;your-class-name&quot;</code>，多出来的{}是因为这个select API的最后两个参数都是Hash，必须多包一个<code>{}</code>才能让 <code>:class</code> 挤到最后的参数去。</li>
</ol>
<p>搭配model用的f.check_box :column_name和check_box_tag :input_name有微妙的差异，前者会多产生一个隐藏的hidden_field :column_name, “0”来表示没有勾选的状态，后者则不会。这是因为如果你没有勾选的话，浏览器就不会送出check_box的资料，因此Rails用了一个隐藏栏位来处理反勾选。</p>
<ol>
<li>如何处理 <code>Model</code> 中不存在的属性<br>使用 <code>form_for</code> 时，其中的栏位必须是 <code>Model</code> 有的属性，那如果资料库没有这个栏位呢?这时候你依需要在 <code>Model</code> 程式中加上存取方法，例如：</li>
</ol>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Event</span> &lt; ApplicationRecord</span></div><div class="line"></div><div class="line">  <span class="comment">#...</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">custom_field</span></span></div><div class="line">      <span class="comment"># 根據其他屬性的值或條件，來決定這個欄位的值</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">custom_field=</span><span class="params">(value)</span></span></div><div class="line">      <span class="comment"># 根據value，來調整其他屬性的值</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>这样就可以在 <code>form_for</code> 里使用 <code>custom_field</code> 了。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;%= form_for @event <span class="keyword">do</span> <span class="params">|f|</span> %&gt;</div><div class="line">    &lt;%= f.text_field <span class="symbol">:custom_field</span> %&gt;</div><div class="line">    &lt;%= f.submit %&gt;</div><div class="line">&lt;% <span class="keyword">end</span> %&gt;</div></pre></td></tr></table></figure>
<p>记得把 <code>:custom_field</code> 也加到 <code>Strong Parameters</code> 清单里，这样按下送出后，就可以跟着 <code>@event</code> 本来的栏位一起处理了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/15/一冰箱水果/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/15/一冰箱水果/" itemprop="url">一冰箱水果</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-15T22:35:35+08:00">
                2017-11-15
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/15/一冰箱水果/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/15/一冰箱水果/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>小时候，<br>妈妈几乎是我的全部，<br>她给我梳两个高高的辫子，<br>她给我缝带着小花的毽子，<br>她给我买参加大礼堂表演的裙子，<br>她高兴的把我抱起并亲吻我的脸颊，<br>她在别人面前夸我懂事并抚摸我的头发，<br>她深夜陪我一起做作业看我写一笔一画，<br>她安排我周末打扫屋子和院子，<br>她累了躺在床上起不来，教我第一次做饭，<br>她端着我做的饭出去串门，一个劲儿的夸，<br>可是那次我只放了很多油，没有放盐，<br>她曾经是我无话不说的好朋友，<br>她，篇篇出现在我小时候的作文里，不管什么主题；</p>
<p>后来，我们隔了万水千山，<br>我们曾书信互诉思念，<br>看着她用产品单的空白处给我写的信，<br>我哭了一遍又一遍，<br>那些日子，<br>像没有阳光一样黑暗，<br>我在她回来看我的一个晚上，<br>靠着县城旅馆外面的栏杆，<br>看着外面霓虹的路灯和来往的车辆，<br>我想通了，<br>妈妈不是我的全部，<br>我也不是妈妈的全部；</p>
<p>再后来，我长大了，<br>我不再日日思念她，<br>只在心情变幻的时候想起她，<br>我想她说的话，<br>我想她的一生，<br>我想她想的忧虑，<br>我想她想的责任，<br>我想改变我们的命运，<br>我想的越来越多，<br>我把自己想的头痛，<br>居然是她过来宽慰我了；</p>
<p>我思索着，<br>追寻着，<br>我曾经许诺，<br>要让她拥有一冰箱水果，<br>为了我们的生活，<br>我走着，<br>也感恩着，<br>感谢她，<br>感谢帮助我的人，<br>也感谢灵魂里对我说话的另一个我。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/15/code-block/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/15/code-block/" itemprop="url">code block</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-15T20:58:43+08:00">
                2017-11-15
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/15/code-block/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/15/code-block/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><code>code block</code> <strong>⼀种匿名⽅法</strong></li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123; puts <span class="string">"Hello"</span> &#125; <span class="comment"># 这是一個 block</span></div><div class="line"></div><div class="line"><span class="keyword">do</span></div><div class="line"> puts <span class="string">"Blah"</span> <span class="comment"># 这也是一個 block</span></div><div class="line"> puts <span class="string">"B</span></div><div class="line"><span class="string">end</span></div></pre></td></tr></table></figure>
<ul>
<li><strong>內部迭代器(iterator)</strong></li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 处理数组 people</span></div><div class="line">people = [<span class="string">"David"</span>, <span class="string">"John"</span>, <span class="string">"Mary"</span>]</div><div class="line">people.each <span class="keyword">do</span> <span class="params">|person|</span></div><div class="line"> puts person</div><div class="line"><span class="keyword">end</span></div><div class="line"><span class="comment"># 反复五次</span></div><div class="line"><span class="number">5</span>.times &#123; puts <span class="string">"Ruby rocks!"</span> &#125;</div><div class="line"><span class="comment"># 从一数到九</span></div><div class="line"><span class="number">1</span>.upto(<span class="number">9</span>) &#123; <span class="params">|x|</span> puts x &#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>其他迭代⽅式</strong></li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 迭代并造出另一个数组</span></div><div class="line">a = [ <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span> ]</div><div class="line">b = a.map &#123;<span class="params">|x|</span> x + <span class="string">"!"</span> &#125;</div><div class="line">puts b.inspect</div><div class="line"><span class="comment"># 结果是 ["a!", "b!", "c!", "d!"]</span></div><div class="line"><span class="comment"># 找出符合条件的值</span></div><div class="line">b = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].find_all&#123; <span class="params">|x|</span> x % <span class="number">2</span> == <span class="number">0</span> &#125;</div><div class="line">b.inspect</div><div class="line"><span class="comment"># 结果是 [2]</span></div></pre></td></tr></table></figure>
<ul>
<li><strong>当作判断条件</strong></li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 迭代并根据条件刪除</span></div><div class="line">a = [ <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span> ]</div><div class="line">a.delete_if &#123;<span class="params">|x|</span> x &gt;= <span class="string">"b"</span> &#125;</div><div class="line"><span class="comment"># 结果是 ["a"]</span></div><div class="line"><span class="comment"># 条件排序</span></div><div class="line">[<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>].sort! &#123; <span class="params">|a, b|</span> b &lt;=&gt; a &#125;</div><div class="line"><span class="comment"># 结果是 [3, 2, 1]</span></div></pre></td></tr></table></figure>
<ul>
<li><strong>functional programming</strong></li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 计算总和</span></div><div class="line">(<span class="number">5</span>..<span class="number">10</span>).reduce &#123;<span class="params">|sum, n|</span> sum + n &#125;</div><div class="line"><span class="comment"># 找出最长字串find the longest word</span></div><div class="line">longest = [<span class="string">"cat"</span>, <span class="string">"sheep"</span>, <span class="string">"bear"</span>].reduce <span class="keyword">do</span> <span class="params">|memo,</span></div><div class="line"><span class="params">word|</span></div><div class="line"> ( memo.length &gt; word.length )? memo : word</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<ul>
<li><strong>仅执⾏⼀次呼叫 pre- post- processing</strong></li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">file = File.new(<span class="string">"testfile"</span>, <span class="string">"r"</span>)</div><div class="line"><span class="comment"># ...处理文件</span></div><div class="line">file.close</div><div class="line"><span class="comment"># 但 Ruby 习惯⽤以下写法</span></div><div class="line">File.open(<span class="string">"testfile"</span>, <span class="string">"r"</span>) <span class="keyword">do</span> <span class="params">|file|</span></div><div class="line"> <span class="comment"># ...处理文件</span></div><div class="line"><span class="keyword">end</span></div><div class="line"><span class="comment"># 文件自动关闭</span></div></pre></td></tr></table></figure>
<ul>
<li><strong>Yield</strong> 在方法中使用 yield 可以执行 Code block 参数</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 定义方法</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">call_block</span></span></div><div class="line">  puts <span class="string">"Start"</span></div><div class="line">  <span class="keyword">yield</span></div><div class="line">  <span class="keyword">yield</span></div><div class="line">  puts <span class="string">"End"</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">call_block &#123; puts <span class="string">"Blocks are cool!"</span> &#125;</div><div class="line"><span class="comment"># 输出</span></div><div class="line"><span class="comment"># "Start"</span></div><div class="line"><span class="comment"># "Blocks are cool!"</span></div><div class="line"><span class="comment"># "Blocks are cool!"</span></div><div class="line"><span class="comment"># "End"</span></div><div class="line"></div><div class="line">带有参数的Code block</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">call_block</span></span></div><div class="line">  <span class="keyword">yield</span>(<span class="number">1</span>)</div><div class="line">  <span class="keyword">yield</span>(<span class="number">2</span>)</div><div class="line">  <span class="keyword">yield</span>(<span class="number">3</span>)</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">call_block &#123; <span class="params">|i|</span></div><div class="line">  puts <span class="string">"<span class="subst">#&#123;i&#125;</span>: Blocks are cool!"</span></div><div class="line">&#125;</div><div class="line"><span class="comment"># 輸出</span></div><div class="line"><span class="comment"># "1: Blocks are cool!"</span></div><div class="line"><span class="comment"># "2: Blocks are cool!"</span></div><div class="line"><span class="comment"># "3: Blocks are cool!"</span></div></pre></td></tr></table></figure>
<ul>
<li><strong>Proc object</strong> 可以将Code block明确转成一个变数：</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">call_block</span><span class="params">(&amp;block)</span></span></div><div class="line">  block.call(<span class="number">1</span>)</div><div class="line">  block.call(<span class="number">2</span>)</div><div class="line">  block.call(<span class="number">3</span>)</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">call_block &#123; <span class="params">|i|</span> puts <span class="string">"<span class="subst">#&#123;i&#125;</span>: Blocks are cool!"</span> &#125;</div><div class="line"></div><div class="line"><span class="comment"># 輸出</span></div><div class="line"><span class="comment"># "1: Blocks are cool!"</span></div><div class="line"><span class="comment"># "2: Blocks are cool!"</span></div><div class="line"><span class="comment"># "3: Blocks are cool!"</span></div><div class="line"></div><div class="line"><span class="comment"># 或是先宣告出 proc object (有三種寫法，大同小異)</span></div><div class="line">proc_1 = Proc.new &#123; <span class="params">|i|</span> puts <span class="string">"<span class="subst">#&#123;i&#125;</span>: Blocks are cool!"</span> &#125;</div><div class="line">proc_2 = lambda &#123; <span class="params">|i|</span> puts <span class="string">"<span class="subst">#&#123;i&#125;</span>: Blocks are cool!"</span> &#125;</div><div class="line">proc_3 = -&gt; (i) &#123;  puts <span class="string">"<span class="subst">#&#123;i&#125;</span>: Blocks are cool!"</span>  &#125;</div><div class="line"></div><div class="line">call_block(&amp;proc_1)</div><div class="line">call_block(&amp;proc_2)</div><div class="line">call_block(&amp;proc_3)</div><div class="line"></div><div class="line"><span class="comment"># 分別輸出</span></div><div class="line"><span class="comment"># "1: Blocks are cool!"</span></div><div class="line"><span class="comment"># "2: Blocks are cool!"</span></div><div class="line"><span class="comment"># "3: Blocks are cool!"</span></div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/12/讨生活/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/12/讨生活/" itemprop="url">讨生活</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-12T00:28:38+08:00">
                2017-11-12
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/12/讨生活/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/12/讨生活/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我村子周围的和我差不多大的孩子，如今也和我一样，二十四五的大人了。他们大多是初中高中毕业，成绩好点的，上了普通的二本，再好的就是一本了。我的朋友中，最高的就是二本差不多，一本的都是我听过，却不曾认识的校友。我的亲戚中，也就几乎都是初中或高中毕业了。</p>
<p>他们不上学的原因都相似，不是因为家里孩子多，就是因为自己不爱学，想早点出来靠自己养活自己。当还是初中生高中生的时候，想象的，世界靠自己的打拼，应该是可以糊口的，甚至是光明的。有的学理发，有的跟随大人一起去工厂打工，还有的男孩子跟着父亲去工地。听说去工地的薪资还会高一些，每天劳作的时间很长，消耗体力也比较大。</p>
<p>出来打拼，我看到别人说的都挺美的励志故事。可是，我自己出来找工作的时候，发现，没学历没技能，只能去找服务员，餐厅后厨，工厂，卖化妆品这些工作了，而和我差不多的孩子也大都如此，他们至今依然如此。每个月薪资很薄弱，每天工作最少都得12个小时，一个月只能休息一天，好一点的能多休息几天。我所知道的，都在这样的讨生活。</p>
<p>村里的父亲们，一年到头，在工地，只在过年或家里有急事的时候回来一趟，待个几天就又继续去工地了。承担着为儿子盖房子娶媳妇的债务，还承担着家人和孙子的生活费。因为儿子的薪资也只够自己过活吧。有好一点的，还得自己还贷啊。</p>
<p>我自己第一份工作是汉堡店，工资 1600，刚拿到手的时候，现金嘛，比较有手感。当时，第一次有自己的钱，还是自己有史以来最多的钱的时候，我很激动；但也有一个一直没有漏掉的对自己的质疑，一个月这么快，给我发工资了，我干的活配的上这些工资么？之后，我也去过电子厂，当过服务员，发过传单，找过兼职。</p>
<p>在我的印象里，一直都是在讨生活，我，和我周围的人，生活是艰辛的。通过自己的考虑，我决定去学一项技能，来改变这种讨生活的局面。是的，在这个层面上，有可能现在我算是小小的达到目的了。现在，我月薪过万了。在我的村子里，这是多么让人羡慕的数字。<strong>我像小时候勤快会干家务活一样迎来了很多的夸赞。</strong></p>
<p>可是，我还是觉得自己在讨生活。我还没有过另外一个阶段。我害怕自己失业，一失业我就又什么都没有了。<strong>我时刻保持着危机感，尤其是我给家里的亲戚打电话的时候。</strong>他们又在跟我说着多少为钱发愁的地方，说着谁家又离婚了，谁家又生孩子了，谁家孩子又死不听话做了什么天大的错事了。</p>
<p>是的，我很害怕跟他们打电话听他们说这些。我害怕进入这些生活的轮回中。我要改变我的命运，从我记事起，我就一直这样对自己赌气。我通过不断地学习与自省，以一个理智而又正确的眼光看待自己的生活以及周围人的生活，就像我今天读老舍的《我这一辈子》一样，<strong>看透这些乱七八糟的悲惨故事，穿透它，重新审视生活，用高维的智慧去审视，才能在生活的怪圈之外找到出路。</strong>那些凄惨的，大人们不愿意看到的孩子的命运，有些时候也并不能全怪孩子不争气，反过来你也很难要求家长去增长见识，去学会该如何教育孩子，是的，他们讨生活已经够艰辛了。</p>
<p>妈妈常常劝我，老老实实好好干自己的工作，别想那么多。我对象也觉得我总是瞎忙，而忽略了好好生活，一起好好生活。其实，他们不知道，不折腾，我内心的恐惧就无法摆脱。我想拥有像李笑来有篇文章里面说的「逃逸速度」。<strong>「赚钱一定要快，要快到超越“第二宇宙速度”，不然你飞不出去」</strong>，里面形象的用了「逃逸速度」，也就是「第二宇宙速度」来比喻，只有用第二宇宙速度「航天器可以摆脱地球引力的束缚，飞离地球」。他不只是这篇文章打动了我，<a href="https://b.xinshengdaxue.com/" target="_blank" rel="external">《七年就是一辈子》</a>这整本电子书的每一篇文章都打动了我。虽然，现在看来，读过这本书快两年的我，远远达不到这种速度，以至于我觉得自己永远都达不到这个速度了。</p>
<p>我相信我是努力的，我也可以是继续努力的，并且我觉得自己是在努力的，可是我的学习效率，以及学习深度，从哪里学？怎么学？怎么学的更好？如何分配自己的工作、学历学习、生活、感情和家庭？讨生活，还在不停的赶着我，继续讨生活。<strong>我崩的越紧，生活反而会越糟，我试着理清自己的思绪。想以慢来达快，以从容面对内心的恐惧，以成熟应对过去的焦灼！嗯，至少我现在做到了可以安稳的度过一天。虽然，还是在讨生活，但，讨生活，是寻求生路，是追求过活的。</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/10/关于写作，我想说的/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/10/关于写作，我想说的/" itemprop="url">关于写作，我想说的</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-10T18:39:12+08:00">
                2017-11-10
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/10/关于写作，我想说的/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/10/关于写作，我想说的/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我是学 rails 开始写学习日志到现在陆续养成的写作习惯。当然中间也有停过的时候。<strong>我觉得，想写的时候就写，不想写的时候也别硬着头皮给自己下任务。</strong>生活不紧不慢，不要把自己逼的过于紧张，虽然，我也经常说自己是追求不断进步的人，但是，逼的太紧，会有很多焦虑感，反而做不了更多的事情。</p>
<p>这段时间写些东西，第一个印象深刻的感触就是，不管是写技术博客，还是写生活感悟，发布前后，<strong>阅读此文章最多次数的人，就是作者自己了</strong>。</p>
<p>从开始构思文章，到敲满整个屏幕，最后一遍一遍的「增删改查」这篇文章，少了两三次，多的得几十次。可想而知，从这篇文章里面收获最大的还是你自己。如果你是写的技术博客，兴许你能把这个技术点的小知识就能了然于胸了，巩固了自己的学习，也给别人的学习增加了参考。如果是关于生活的感悟，我想你也能在这篇文章里面得到最大的宣泄，同时，你也会发现自己会理智很多，也更能理清情绪的来由。在朋友圈，很难去表达自己的心情，尤其是在自己不断成熟的时刻。一个小的心情，发个状态还会引起大家过分的关注，写篇文章抒发，就不会遇到这种问题了。因为文章会理的比较详尽，就算有朋友关心，也不会像朋友圈那里那样轰炸。</p>
<p>写作，可以让你深入思考；写作的时候，你会从文字的表达中，不断理清思绪，结构化他们。甚至，写作，可以平静你的内心，也能帮你好好找到解决问题的出发点。就是那么神奇，当你下笔后，或许你就会停不下来了。</p>
<p>有话没人说，写作；有感悟没处分享，写作；获得了一个小技能分享给大家，写作；遇到了一个美妙的故事，写作；是的，当你开始写的时候，会发现，生活到处都是素材，哪块都能提取出来一篇文章，给自己给他人带来愉悦，感动，或者悲伤。</p>
<p>之前一瞬间的感触，我就想记下来，直到现在我还不知道怎么能写一篇文章，不过可以记下这思考的片段：<br>晚上回家，遇到马路上有卸小汽车的，我只是经过且眼睛大概扫了一眼，就径直要离开了；这时，一个小孩的声音传了过来，“妈妈，我要过去看看”，说完就欢快的一路跑过去，为了看的更清楚一点这个卸车的过程；这个小孩大概才3岁吧，他妈妈在后面走的更快了，去追他。</p>
<p>从这里我想到啥呢，如果是我以前，我也会很好奇的，像那个孩子一样跑过去，看整个卸车的过程。现在不是因为我很清楚卸车的过程了，这种装了好几层小汽车的，我也没怎么见过，<strong>只是，我心里装着生存状态下的忧虑，装不下那些对于生存没有帮助的好奇心了</strong>。我要回家吃饭，洗刷，学习，或者别的什么，总有忙的，甚至是没有什么忙的，我的大脑潜意识也是朝着对生存有用的方向连接着，默认的情况下，是不能停下脚步的。</p>
<p>我不知道这个现象代表了什么，也不知道是不是意味着自己长大了，还是失去童趣了，总觉得，<strong>生活因为生存的考虑少了本该有的好奇心和趣味</strong>。值得庆幸的是，我还能反向思考。</p>
<p><strong>就是像这样，写作，给了我一个思考和记录的空间</strong>，记录这些美妙的小瞬间。<br>如果，你不确定写作是否真的为你带来好处，可以试试。不要逼自己，就想到了的时候，试一试。或许你也会因为听到噼啪的键盘声音而如痴如醉，这或许也能给你带来些小惊喜呢。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/10/command-line-学习：目录操作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/10/command-line-学习：目录操作/" itemprop="url">command-line 学习：目录操作</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-10T16:59:08+08:00">
                2017-11-10
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/10/command-line-学习：目录操作/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/10/command-line-学习：目录操作/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>使用的电脑为 mac 。</p>
<p>参考：<a href="https://www.learnenough.com/command-line-tutorial" target="_blank" rel="external">Learn Enough Command Line to Be Dangerous</a></p>
<h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><p>在 Unix 中的所有目录都是 <code>/</code> 的子目录。目录以 <code>/</code> 开头和分隔目录。</p>
<p><code>/Users/yourname/ruby/projects</code>  和 <code>~/ruby/projects</code> 是一样的。</p>
<p>除了用户目录之外，每个 Unix 系统都有用于计算机正常操作的程序的系统目录。超级用户才能修改系统文件或者系统目录，root。以root身份登录的超级用户很强大，以至于被认为是一种不好的形式; 被替代的做法是作为 root 执行的任务通常应该使用 sudo 命令。</p>
<p><code>sudo !!</code> 会以 sudo 形式运行上一个命令。<br><code>!ls</code> 会运行 上一个 ls 命令。</p>
<p><code>sudo</code> 命令让普通的用户可以像超级yo可以执行命令</p>
<h2 id="创建目录"><a href="#创建目录" class="headerlink" title="创建目录"></a>创建目录</h2><p>mkdir 是 <code>make directory</code> 的缩写.</p>
<p><code>$ mkdir text_files</code></p>
<p>创建过目录，我们可以使用通配符把所有的文本文件都转移到这个目录里面。    </p>
<p><code>$ mv *.txt text_files/</code></p>
<p>我们可以通过 <code>ls</code> 确认一下：</p>
<p><code>$ ls text_files/</code></p>
<p><code>ls</code> 一个目录，可以把它包含的所有内容都展示出来，我们可以用 <code>-d</code> 来仅仅展示目录。</p>
<p><code>$ ls -d text_files/</code></p>
<p>这个常常和 <code>-l</code> 一起使用。</p>
<p><code>$ ls -ld text_files/</code></p>
<p>我们可以通过 <code>cd</code> 切换目录。</p>
<p><code>cd</code> 支持 <code>Tab</code> 自动补全。</p>
<p>可以只输入部分，再按 <code>Tab</code> 键即可自动补全。如 <code>cd tex⇥</code></p>
<p><code>cd</code> 输入之后，我们可以用 <code>print working directory</code> 命令，缩写 <code>pwd</code>，还有 <code>ls</code> 一起配合使用来看我们是否进入了正确的目录。</p>
<p><code>$ pwd</code> 看看你是否在正确的目录结构<br><code>$ ls</code> 看看目录中的内容，就可以确定您是都正确进入</p>
<h2 id="切换目录"><a href="#切换目录" class="headerlink" title="切换目录"></a>切换目录</h2><p>使用 <code>cd</code> 是最主要的切换目录的方式，但还有很多别的形式值得我们了解。想去上级目录，可以使用 <code>cd ..</code></p>
<p>如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ pwd</div><div class="line">/Users/mhartl/text_files</div><div class="line">$ cd ..</div><div class="line">$ pwd</div><div class="line">/Users/mhartl</div></pre></td></tr></table></figure>
<p>如果只输入 <code>cd</code> ，将会进入用户的根目录。和 <code>cd ~</code> 是一样的。</p>
<p>如果我们在其他的目录下，使用 <code>cd ~/text_files</code> 这种形式可以快速进入这个目录中。</p>
<p><code>cd .</code> 代表当前目录。最常用的是移动文件或者复制文件到当前目录中。</p>
<p>如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ pwd</div><div class="line">/Users/mhartl/text_files</div><div class="line">$ cd ~/second_directory</div><div class="line">$ ls</div><div class="line">$ cp ~/text_files/sonnets.txt .</div><div class="line">$ ls</div><div class="line">sonnets.txt</div></pre></td></tr></table></figure>
<p>在上面，第一次输入 <code>ls</code> 没有东西输出，是因为，刚刚创建的 <code>second_directory</code> 里面还是空的。</p>
<p>另外一个用 <code>.</code> 的是和 <code>find</code> 一起使用。想 <code>grep</code> 一样的强大。<br>如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ cd</div><div class="line">$ find . -name &apos;*.txt&apos;</div><div class="line">./text_files/sonnet_1.txt</div><div class="line">./text_files/sonnet_1_reversed.txt</div><div class="line">./text_files/sonnets.txt</div></pre></td></tr></table></figure>
<p>这是找到当前目录下以及它们的子目录中所有匹配 <code>*.txt</code> 的文件。<br>还有使用 <code>.</code> 的地方是 <code>open .</code>，在 mac 系统中总是可以生效。</p>
<p><code>open</code> 命令可以打开目录或者文件，比如 <code>open foo.pdf</code> 将会用默认的 pdf 预览器打开 foo 这个 PDF 文件， <code>open .</code> 则是在 finder 中打开。</p>
<p>最后一个切换命令是 <code>cd -</code>, 它会切换到上一个目录中。<br>如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ pwd</div><div class="line">/Users/mhartl/second_directory</div><div class="line">$ cd ~/text_files</div><div class="line">$ pwd</div><div class="line">/Users/mhartl/text_files</div><div class="line">$ cd -</div><div class="line">/Users/mhartl/second_directory</div></pre></td></tr></table></figure>
<p>混合命令。</p>
<p>如：</p>
<p><code>$ ./configure ; make ; make install</code></p>
<p>这个混合命令，会先执行 <code>make</code> 在执行 <code>make install</code></p>
<p>更好一点的写法是：</p>
<p><code>$ ./configure &amp;&amp; make &amp;&amp; make install</code></p>
<p>一个用 <code>;</code> 分隔开，一个用 <code>&amp;&amp;</code> 分隔开。使用 <code>&amp;&amp;</code> 的话，只有上一个命令执行成功了才会执行下一个命令。而使用 <code>;</code> 分隔，不管上一个命令是否执行成功，都会执行下一个命令。</p>
<h2 id="重命名，复制和删除目录"><a href="#重命名，复制和删除目录" class="headerlink" title="重命名，复制和删除目录"></a>重命名，复制和删除目录</h2><p>重命名：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ mkdir foo</div><div class="line">$ mv foo/ bar/</div><div class="line">$ cd foo/</div><div class="line">-bash: cd: foo: No such file or directory</div><div class="line">$ cd bar/</div></pre></td></tr></table></figure>
<p>把 <code>text_files</code> 目录及所有内容 复制到 foobar 中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ cd</div><div class="line">$ mkdir foobar</div><div class="line">$ cd foobar/</div><div class="line">$ cp -r ../text_files .</div><div class="line">$ ls</div><div class="line">text_files</div></pre></td></tr></table></figure>
<p>如果仅仅是复制目录下的所有内容到此目录中，要加上 <code>/</code>,如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ cp -r ../text_files/ .</div><div class="line">$ ls</div><div class="line">sonnet_1.txt     sonnet_1_reversed.txt sonnets.txt   text_files</div></pre></td></tr></table></figure>
<p>如果你只是想复制文件，使用 <code>*</code> 来表示，如：<br><code>$ cp ../text_files/* .</code>  把 text_files 下的所有文件复制到当前目录下。</p>
<p>删除目录 <code>rmdir</code>，很难执行成功。如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ cd</div><div class="line">$ rmdir second_directory</div><div class="line">rmdir: second_directory/: Directory not empty</div></pre></td></tr></table></figure>
<p>当删除目录的时候，99% 的记录会出现上面这个错误，因为 <code>rmdir</code> 目录必须要是空的。可以使用一个更强大，但同时也更危险的命令 <code>remove recursive force</code>，即 <code>rm -rf</code>，这会删除这个目录，以及这个目录里的所有文件及子目录，而且没有再次的确认提示。<br>如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ rm -rf second_directory/</div><div class="line">$ ls second_directory</div><div class="line">ls: second_directory: No such file or directory</div></pre></td></tr></table></figure></p>
<p>如果你想找到含有 <code>sesquipedalian</code> 这个词的文件，但是你又忘记了文件的名字了，你可以使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ grep -r sesquipedalian text_files</div><div class="line">text_files/foo/long_word.txt:sesquipedalian</div></pre></td></tr></table></figure>
<p>由于大小写不重要，建议在递归的情况下添加 <code>-i</code> 选项，如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ grep -ri sesquipedalian text_files</div><div class="line">text_files/foo/long_word.txt:sesquipedalian</div></pre></td></tr></table></figure>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>mkdir <name></name></td>
<td>Make directory with name</td>
<td>$ mkdir foo</td>
</tr>
<tr>
<td>pwd</td>
<td>Print working directory</td>
<td>$ pwd</td>
</tr>
<tr>
<td>cd <dir></dir></td>
<td>Change to <dir></dir></td>
<td>$ cd foo/</td>
</tr>
<tr>
<td>cd ~/<dir></dir></td>
<td>cd relative to home</td>
<td>$ cd ~/foo/</td>
</tr>
<tr>
<td>cd</td>
<td>Change to home directory</td>
<td>$ cd</td>
</tr>
<tr>
<td>cd -</td>
<td>Change to previous directory</td>
<td>$ cd &amp;&amp; pwd &amp;&amp; cd -</td>
</tr>
<tr>
<td>.</td>
<td>The current directory</td>
<td>$ cp ~/foo.txt .</td>
</tr>
<tr>
<td>..</td>
<td>One directory up</td>
<td>$ cd ..</td>
</tr>
<tr>
<td>find</td>
<td>Find files &amp; directories</td>
<td>$ find . -name foo*.*</td>
</tr>
<tr>
<td>cp -r <old> <new></new></old></td>
<td>Copy recursively</td>
<td>$ cp -r ~/foo .</td>
</tr>
<tr>
<td>rmdir <dir></dir></td>
<td>Remove (empty) dir</td>
<td>$ rmdir foo/</td>
</tr>
<tr>
<td>rm -rf <dir></dir></td>
<td>Remove dir &amp; contents</td>
<td>$ rm -rf foo/</td>
</tr>
<tr>
<td>grep -ri <string> <dir></dir></string></td>
<td>Grep recursively (case-insensitive)</td>
<td>$ grep -ri foo bar/</td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/09/command-line-学习：检阅文件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/09/command-line-学习：检阅文件/" itemprop="url">command-line 学习：检阅文件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-09T12:05:55+08:00">
                2017-11-09
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/09/command-line-学习：检阅文件/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/09/command-line-学习：检阅文件/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>使用的电脑为 mac 。</p>
<p>参考：<a href="https://www.learnenough.com/command-line-tutorial" target="_blank" rel="external">Learn Enough Command Line to Be Dangerous</a></p>
<h2 id="下载文件"><a href="#下载文件" class="headerlink" title="下载文件"></a>下载文件</h2><p>用 which 命令可以查看命令行是否支持 curl，</p>
<p><code>$ which curl</code><br><code>/usr/bin/curl</code></p>
<p>如果输出结果是空的，说明不支持，得安装。可以自行 google 关键词 install curl 进行安装。<br>curl 安装好，可以下载文件了。</p>
<p><code>$ curl -OL cdn.learnenough.com/sonnets.txt</code><br><code>$ ls -rtl</code><br><code>$ !! # 可以出来最近一次使用的命令</code><br><code>$ !curl # 可以出来最近一次使用 curl 开头的命令</code></p>
<p> 还有一个小技巧，可以使用 <code>ctrl + r</code>，这个可以进行搜索，输入 <code>curl</code> ，便可以查询以 <code>curl</code> 开头的命令。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ 按住 ctrl 和 R</div><div class="line">(reverse-i-search)`&apos;: curl</div></pre></td></tr></table></figure></p>
<h2 id="head-tail"><a href="#head-tail" class="headerlink" title="head tail"></a>head tail</h2><p><code>$ head sonnets.txt # 查看 sonnets.txt 文件的前 10 行</code><br><code>$ tail sonnets.txt # 查看 sonnets.txt 文件的后 10 行</code><br><code>$ wc sonnets.txt # 查看 sonnets.txt 文件有多少行，多少字，多少字节
  2620  17670  95635 sonnets.txt</code><br><code># 把 sonnets.txt 的 head 部分放入 sonnets_head.txt，并统计
sonnets_head.txt  中有多少行，多少字，和多少字节</code><br><code>$ head sonnets.txt &gt; sonnets_head.txt</code><br><code>$ wc sonnets_head.txt
  10   46   294 sonnets_head.txt</code><br><code># 用一行命令也可以搞定</code><br><code>$ head sonnets.txt | wc
  10   46   294Â</code></p>
<h2 id="less-more"><a href="#less-more" class="headerlink" title="less more"></a>less more</h2><p><code>$ less sonnets.txt</code><br>这个可以给文件一个导航，然后你可以通过 ↑ ↓，空格键去翻页。按 <code>ctrl + f</code> 可以一下到下个目录，<code>ctrl + b</code> 可以到上一个目录。输入 q 退出。</p>
<p>还可以 输入 <code>/rose</code> 来搜索 <code>rose</code>，可以按 <code>n</code> 去到下一个匹配的地方, <code>N</code> 去到上一个匹配的地方。</p>
<p>还有一个 <code>G</code> 去到文件的结尾，<code>1G</code> 去到文件的开头。<br><code>less</code> 中的命令，和 <code>man</code> 中的类似，所以会了 <code>less</code> ，<code>man</code> 中的也可以很好的使用了。</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>up &amp; down arrow keys</td>
<td>Move up or down one line</td>
<td></td>
</tr>
<tr>
<td>spacebar</td>
<td>Move forward one page</td>
<td></td>
</tr>
<tr>
<td>ctrl + f</td>
<td>Move forward one page</td>
<td></td>
</tr>
<tr>
<td>ctrl + b</td>
<td>Move back one page</td>
<td></td>
</tr>
<tr>
<td>G</td>
<td>Move to end of file</td>
<td></td>
</tr>
<tr>
<td>1G</td>
<td>Move to beginning of file</td>
<td></td>
</tr>
<tr>
<td>/<string></string></td>
<td>Search file for string</td>
<td>/rose</td>
</tr>
<tr>
<td>n</td>
<td>Move to next search result</td>
<td></td>
</tr>
<tr>
<td>N</td>
<td>Move to previous search result</td>
<td></td>
</tr>
<tr>
<td>q</td>
<td>Quit less</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h2><p><code>$ grep rose sonnets.txt # 找出所有存在 rose 的地方</code></p>
<p><code>$ grep rose sonnets.txt | wc # 统计出现 rose 的行数 字数 字节数（大写的 Rose 不能被统计到，grep 大小写敏感）</code><br>    10   82   419<br><code>$ grep -i rose sonnets.txt | wc # 不计大小写统计
    12      96     508</code></p>
<p>ps 是 process status 的缩写。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">ps -aux</div><div class="line">$ ps aux</div><div class="line">$ ps aux | grep spring # 查看 spring 进程</div><div class="line">    ubuntu 12241 0.3 0.5 589960 178416 ? Ssl Sep20 1:46</div><div class="line">    spring app | sample_app | started 7 hours ago</div><div class="line">$ kill -15 12241    # 杀死 12241 进程</div><div class="line">$ pkill -15 -f spring # 杀死所有的 spring 进程</div><div class="line">$ top # 可查看所有的进程</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>curl</td>
<td>Interact with URLs</td>
<td>$ curl -O example.com</td>
</tr>
<tr>
<td>which</td>
<td>Locate a program on the path</td>
<td>$ which curl</td>
</tr>
<tr>
<td>head <file></file></td>
<td>Display first part of file</td>
<td>$ head foo</td>
</tr>
<tr>
<td>tail <file></file></td>
<td>Display last part of file</td>
<td>$ tail bar</td>
</tr>
<tr>
<td>wc <file></file></td>
<td>Count lines, words, bytes</td>
<td>$ wc foo</td>
</tr>
<tr>
<td>cmd1 &#124; cmd2</td>
<td>Pipe cmd1 to cmd2</td>
<td>$ head foo &#124; wc</td>
</tr>
<tr>
<td>ping <url></url></td>
<td>Ping a server URL</td>
<td>$ ping google.com</td>
</tr>
<tr>
<td>less <file></file></td>
<td>View file contents interactively</td>
<td>$ less foo</td>
</tr>
<tr>
<td>grep <string> <file></file></string></td>
<td>Find string in file</td>
<td>$ grep foo bar.txt</td>
</tr>
<tr>
<td>grep -i <string> <file></file></string></td>
<td>Find case-insensitively</td>
<td>$ grep -i foo bar.txt</td>
</tr>
<tr>
<td>ps</td>
<td>Show processes</td>
<td>$ ps aux</td>
</tr>
<tr>
<td>top</td>
<td>Show processes (sorted)</td>
<td>$ top</td>
</tr>
<tr>
<td>kill -<level> <pid></pid></level></td>
<td>Kill a process</td>
<td>$ kill -15 24601</td>
</tr>
<tr>
<td>pkill -<level> -f <name></name></level></td>
<td>Kill matching processes</td>
<td>$ pkill -15 -f spring</td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/07/第一次有了测试先行的冲动/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/07/第一次有了测试先行的冲动/" itemprop="url">第一次有了测试先行的冲动</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-07T09:17:27+08:00">
                2017-11-07
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/07/第一次有了测试先行的冲动/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/07/第一次有了测试先行的冲动/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>由 不写测试 到 补测试 再到 第一次有了测试先行的冲动。</p>
<p>写 java 的时候，在第一家公司都是给银行开发系统，都有专门的框架，只需要让我们补 service 层，也有一堆专门的测试人员，我们是不写测试的。后来去另一个创业的小公司，居然我的水平也是担当了开发主力。每天都是不断写代码，也不知测试为何物。</p>
<p>再后来，转学 rails 了。rails 虽然国内使用的很少，可是一般都要求写测试。而且我们学习的时候老师也有强调，虽然也没怎么学测试怎么写。第一家 rails 公司的技术总监就特别重视测试，也很崇尚 TDD（测试驱动开发，测试先行）。我刚开始十分不习惯，由于几乎没写过测试，对写测试的那套代码也不熟，通过 google 和参考项目中别人写的测试，我每次写测试都费了九牛二虎之力。有一次忘写测试了，还被批了一顿。我那时真的害怕写测试啊。</p>
<p>后来，技术总监给我推荐了《测试驱动开发》那本书，我也硬着头皮看完了，还看了两遍。读完后，了解了 TDD 的很多好处和一些测试的流程。虽然表面上知道了很多TDD 的好处，但我心里还是很害怕写测试。应了那句话，纸上得来终觉浅。</p>
<p><strong>这次，我终于第一次有了测试先行的冲动！</strong>因为项目用了些 gem ，修改代码后不重启服务会超级慢。所以每次改完代码都去重启。然而来回重启去测试代码，一旦出错或者有逻辑错误的话，必须再次改代码，再次重启继续测，循环往复，花的时间特别长。所以，我想起来先写测试的好处了。如果我先有了测试，只需要一键就可运行看到结果。</p>
<p>写测试的时候，最讨厌的是要去构造数据，有些数据结构还比较复杂，另外也一直觉得添加测试代码会拖慢进度，构造完数据，还得去构造场景，尤其是进度一直赶着你的时候，写测试的时间就更觉得是浪费了。但是很多时候的偷懒，却带来了更大的不便，快（不写测试）变成了慢，慢（写测试）变成了快。</p>
<p>TDD 崇尚的是测试先行，即没写代码呢，就先写测试。好处是，如果先写测试，必然得知道输入是什么，期望输出的是什么。这样就不断促进思考该如何得到这样的输出，即把设计代码也放入了测试前期的准备中。构思差不多了，可以通过写伪代码的形式快速得到期望值。然后再去一步步把伪代码变成真正的代码。运行测试的时候有可能就变红了（出错了）。改好代码，再次运行，有可能就变绿了（运行正常）。觉得代码写的不太好，重构一下，再运行测试校验重构是否正确，如果变红，继续更改代码，直到再次变绿。这个过程就是 TDD 的过程。也是由红到绿再重构，然后再继续循环，直到觉得代码不需重构且都 Green. （Red Green Refactor为一个循环）。</p>
<p>像我开头说的，我现在是先写代码，通过浏览器测试直到代码正确，最后再去补测试。如果以 TDD 的过程写代码，我就不需要来回重启服务，在浏览器测试代码了，这个节省的时间是大把的，对我这个情境来说更是了。虽然浏览器测试省去了构造数据，模拟场景这些初期写测试不熟的人觉得很麻烦的步骤，但是却也少了测试先行的众多优点。何况写完代码之后一般是必定要写测试的，那提前一步写，其实并没有减慢整体的速度。只不过是写测试手生，被进度赶的慌了神，心里上就觉得写测试耽误时间了。</p>
<p>第一次有了测试先行的冲动。值得记录一下。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/04/command-line-学习：操作文件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/04/command-line-学习：操作文件/" itemprop="url">command-line 学习：操作文件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-04T21:04:09+08:00">
                2017-11-04
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/04/command-line-学习：操作文件/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/04/command-line-学习：操作文件/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>使用的电脑为 mac 。</p>
<p>参考：<a href="https://www.learnenough.com/command-line-tutorial" target="_blank" rel="external">Learn Enough Command Line to Be Dangerous</a></p>
<ol>
<li><p><code>&gt;</code> 和 <code>&gt;&gt;</code> 就算没有编辑器，也是可以把输出的一行字，新创建到一个文件中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">$ echo &quot;From fairest creatures we desire increase,&quot; &gt; sonnet_1.txt`</div><div class="line">  # 这句命令就可以创建一个新的文件 sonnet_1.txt 并把 echo 后面的那句话放到这个文件中。</div><div class="line"></div><div class="line">$ cat sonnet_1.txt</div><div class="line">  # 查看 sonnet_1.txt，会把 sonnet_1.txt 中的内容输出。（cat 是 concatenate 的缩写）</div><div class="line"></div><div class="line">$ echo &quot;That thereby beauty&apos;s Rose might never die,&quot; &gt;&gt; sonnet_1.txt</div><div class="line"></div><div class="line">  # 使用 &gt;&gt; 可以把一句话追加到文件中。</div><div class="line"></div><div class="line">$ diff sonnet_1.txt sonnet_1_lower_case.txt</div><div class="line">&lt; That thereby beauty&apos;s Rose might never die,</div><div class="line">---</div><div class="line">&gt; That thereby beauty&apos;s rose might never die,</div><div class="line"></div><div class="line"># 快速比较两个文件的不同。</div></pre></td></tr></table></figure>
</li>
<li><p><strong>ls</strong></p>
<p>列出当前目录所有的文件和文件夹。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">$ ls foo # 列出这个 foo 下所有的文件和文件夹。</div><div class="line"></div><div class="line">$ touch foo # 可以创建一个空的文件，名字是 foo.</div><div class="line"></div><div class="line">$ cd + 文件名 # 切换到这个文件下面。</div><div class="line"></div><div class="line">$ ls *.txt # 可以列出所有的以 .txt 结尾的文件</div><div class="line"></div><div class="line">$ ls -l *.txt # 可以列出所有以 .txt 结尾的文件，以及更改文件的时间等。时间前面的是这个文件的大小（字节）。</div><div class="line"></div><div class="line">$ ls -rtl # 可以按照修改时间排序，最近的在最后面。这个也可以拆开写 ls -r -t -l</div><div class="line"></div><div class="line">$ echo &quot;*.txt&quot; &gt; .gitignore</div><div class="line">$ cat .gitignore</div><div class="line">*.txt</div><div class="line"></div><div class="line">$ ls # 不会列出隐藏的文件 .gitignore 。</div><div class="line">$ ls -a # 可以列出所有的文件包括隐藏的文件 .gitignore 。</div></pre></td></tr></table></figure>
</li>
<li><p><strong>mv</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ echo &quot;test text&quot; &gt; test</div><div class="line">$ mv test test_file.txt</div><div class="line">$ ls</div><div class="line">test_file.txt</div></pre></td></tr></table></figure>
<p>重命名 text 文件变成 test_file.txt。</p>
</li>
<li><p><strong>cp</strong> copy 复制文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ cp test_file.txt second_test.txt</div><div class="line">$ ls</div><div class="line">second_test.txt</div><div class="line">test_file.txt</div></pre></td></tr></table></figure>
</li>
<li><p><strong>rm</strong> remove 删除文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ rm second_test.txt</div><div class="line">remove second_test.txt? y</div><div class="line">$ ls second_test.txt</div><div class="line">ls: second_test.txt: No such file or directory</div></pre></td></tr></table></figure>
</li>
<li><p><strong>Tab completion</strong> Tab 键自动补全</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ rm tes⇥ # 输入一半的时候可以按住 tab 键，便会自动补全后面的文件名。</div><div class="line"></div><div class="line">$ rm -f *.txt # 删除所有以 *.txt 结尾的文件。f 为 force 的缩写。</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>  翻译好累 😫，结合上面看吧。</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>   &gt;</td>
<td>Redirect output to filename</td>
<td>$ echo foo &gt; foo.txt</td>
</tr>
<tr>
<td>   &gt;&gt;</td>
<td>Append output to filename</td>
<td>$ echo bar &gt;&gt; foo.txt</td>
</tr>
<tr>
<td>   cat <file></file></td>
<td>Print contents of file to screen</td>
<td>$ cat hello.txt  </td>
</tr>
<tr>
<td>   diff <f1> <f2></f2></f1></td>
<td>Diff files 1 &amp; 2</td>
<td>$ diff foo.txt bar.txt</td>
</tr>
<tr>
<td>   ls</td>
<td>List directory or file</td>
<td>$ ls hello.txt</td>
</tr>
<tr>
<td>   ls -l</td>
<td>List long form</td>
<td>$ ls -l hello.txt</td>
</tr>
<tr>
<td>   ls -rtl</td>
<td>Long by reverse modification time</td>
<td>$ ls -rtl</td>
</tr>
<tr>
<td>   ls -a</td>
<td>List all (including hidden)</td>
<td>$ ls -a</td>
</tr>
<tr>
<td>   touch <file></file></td>
<td>Create an empty file</td>
<td>$ touch foo</td>
</tr>
<tr>
<td>   mv <old> <new></new></old></td>
<td>Rename (move) from old to new</td>
<td>$ mv foo bar</td>
</tr>
<tr>
<td>   cp <old> <new></new></old></td>
<td>Copy old to new</td>
<td>$ cp foo bar</td>
</tr>
<tr>
<td>   rm <file></file></td>
<td>Remove (delete) file</td>
<td>$ rm foo</td>
</tr>
<tr>
<td>   rm -f <file></file></td>
<td>Force-remove file</td>
<td>$ rm -f bar</td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">陈云莉 m18301662790@gmail.com</p>
              <p class="site-description motion-element" itemprop="description">记录一些技术点，留下一些生活感悟</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">76</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">24</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">陈云莉 m18301662790@gmail.com</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  

    
      <script id="dsq-count-scr" src="https://chenyunli.disqus.com/count.js" async></script>
    

    

  




	





  










  





  

  

  

  

  

  

</body>
</html>
