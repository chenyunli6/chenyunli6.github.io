<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="记录一些技术点，留下一些生活感悟">
<meta property="og:type" content="website">
<meta property="og:title" content="这里有我的脚丫印😄">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="这里有我的脚丫印😄">
<meta property="og:description" content="记录一些技术点，留下一些生活感悟">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="这里有我的脚丫印😄">
<meta name="twitter:description" content="记录一些技术点，留下一些生活感悟">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title>这里有我的脚丫印😄</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">这里有我的脚丫印😄</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">程序媛</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/21/解决方案/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/21/解决方案/" itemprop="url">一些技术问题的解决方案</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-21T01:07:04+08:00">
                2017-02-21
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/21/解决方案/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/02/21/解决方案/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><h2 id="支持别人的网页嵌入自己的服务"><a href="#支持别人的网页嵌入自己的服务" class="headerlink" title="支持别人的网页嵌入自己的服务"></a>支持别人的网页嵌入自己的服务</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/X-Frame-Options" target="_blank" rel="external">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/X-Frame-Options</a></p>
<p><img src="https://ww4.sinaimg.cn/large/006tNc79ly1fcq3qczcx3j310601ugmd.jpg" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">before_action :allow_iframe</div><div class="line"></div><div class="line">def allow_iframe</div><div class="line">  response.headers.except! &apos;X-Frame-Options&apos;</div><div class="line">end</div></pre></td></tr></table></figure>
<h2 id="访问修饰符"><a href="#访问修饰符" class="headerlink" title="访问修饰符"></a>访问修饰符</h2><p>Private Methods</p>
<p>So you can only call Private methods from the current context of the object, and you can’t call Private methods with a receiver, even if that receiver is self.</p>
<p>只能在当前实例里面调用，实例自己调用也是不行的，是这样理解么。 class 里面可以调用，instance.api_value就不行了。 self.api_value 也不行。</p>
<p>Protected Methods</p>
<p>However, if you call the method with self it will work:</p>
<p>So the important thing to note here is, you can call Protected methods inside the context of an object of the same type.</p>
<h2 id="生成-8-位数字码"><a href="#生成-8-位数字码" class="headerlink" title="生成 8 位数字码"></a>生成 8 位数字码</h2><p>rand.to_s[2..9]</p>
<h2 id="查看ssh-key"><a href="#查看ssh-key" class="headerlink" title="查看ssh key"></a>查看ssh key</h2><p>➜  goldendata-api git:(master) cd ~/.ssh<br>➜  .ssh cat id_rsa.pub<br>ssh-rsa AAAAB3Nz…….</p>
<h2 id="登录-uat-的数据库"><a href="#登录-uat-的数据库" class="headerlink" title="登录 uat 的数据库"></a>登录 uat 的数据库</h2><p>登录到远程服务器<br>    ssh 地址<br>进入到 项目的 目录：<br>    cd /var/apps/project/<br>进入到 current 目录：<br>    cd current<br>进入到rails console，做表的操作<br>    RAILS_ENV=uat bundle exec rails c</p>
<h2 id="压力测试"><a href="#压力测试" class="headerlink" title="压力测试"></a>压力测试</h2><h3 id="siege"><a href="#siege" class="headerlink" title="siege"></a>siege</h3><p>参考： <a href="http://www.cnblogs.com/dw729/archive/2013/04/16/3024338.html" target="_blank" rel="external">http://www.cnblogs.com/dw729/archive/2013/04/16/3024338.html</a><br>cookie 的校验<br>params 要是 encode 后的<br>在提交成功的页面的 header 中寻找 cookie 和 params<br>下面的 cookie 和 params 从提交成功的页面 network 里面可以看到。</p>
<p><img src="https://ww2.sinaimg.cn/large/006tNc79ly1fd0jhsqo1oj31kw0m87k5.jpg" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">siege -c 50 -r 100 -H &apos;Cookie:entry_token=ijMkkH; ...&apos;  &quot;https://uat.jinshuju.net/f/aqo4ek POST utf8=%E2%9C%93&amp;authenticity_token=%2BTnd349r652JPBzfKMzMv4aGljEMx2LP2tTfN29%2BBgVW2p0W7cfDVEUqHa2uuyMD0zOv%2BCc965yGpbwCBk%2FcIQ%3D%3D...&quot;</div></pre></td></tr></table></figure>
<p>siege -c50 -t60S -H ‘Content-Type: application/json’ ‘<a href="http://domain.com/path/to/json.php" target="_blank" rel="external">http://domain.com/path/to/json.php</a> POST {“ids”: [“1”,”2”,”3”]}’</p>
<h3 id="ab-apache-test："><a href="#ab-apache-test：" class="headerlink" title="ab apache test："></a>ab apache test：</h3><p>参考 <a href="http://www.ha97.com/4617.html" target="_blank" rel="external">http://www.ha97.com/4617.html</a></p>
<p>postdata.txt 里面写 encode 后的参数<br>ab -n 4000 -c 2000 -T ‘application/x-www-form-urlencoded’ -p postdata.txt <a href="https://uat.jinshuju.net/f/x6fXZV" target="_blank" rel="external">https://uat.jinshuju.net/f/x6fXZV</a></p>
<h2 id="bootstrapvalidator"><a href="#bootstrapvalidator" class="headerlink" title="bootstrapvalidator"></a>bootstrapvalidator</h2><p><a href="http://bootstrapvalidator.votintsev.ru/settings/" target="_blank" rel="external">http://bootstrapvalidator.votintsev.ru/settings/</a></p>
<h2 id="打开本地-redis"><a href="#打开本地-redis" class="headerlink" title="打开本地 redis"></a>打开本地 redis</h2><p>redis-cli</p>
<h2 id="同事分享"><a href="#同事分享" class="headerlink" title="同事分享"></a>同事分享</h2><p><a href="https://workflowy.com/s/EuhH.J0gNr5G9LD" target="_blank" rel="external">https://workflowy.com/s/EuhH.J0gNr5G9LD</a></p>
<h2 id="获取-ssh"><a href="#获取-ssh" class="headerlink" title="获取 ssh"></a>获取 ssh</h2><ol>
<li>~/.ssh</li>
<li>cat id_rsa.pub</li>
</ol>
<h2 id="header-body-footer"><a href="#header-body-footer" class="headerlink" title="header,body,footer"></a>header,body,footer</h2><h2 id="看测试ing-的-error"><a href="#看测试ing-的-error" class="headerlink" title="看测试ing 的 error"></a>看测试ing 的 error</h2><p>ctrl + t</p>
<h2 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h2><p> ps -x | grep elastic</p>
<h2 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h2><p>删除远端 branch： git push origin –delete 67_exam_score<br>删除本地 branch： git branch -d 67_exam_score<br>把远端分支拉到本地 <code>git checkout --track origin/daves_branch</code></p>
<h2 id="snipaste"><a href="#snipaste" class="headerlink" title="snipaste"></a>snipaste</h2><p>截图什么的。</p>
<h2 id="gemset"><a href="#gemset" class="headerlink" title="gemset"></a>gemset</h2><p>查看当前所有的 gemset 和 当前使用的 gem 管理空间</p>
<p><img src="https://ww2.sinaimg.cn/large/006tKfTcly1fdmjl67ghtj30xq0cgdhk.jpg" alt=""></p>
<p>rvm gemset list</p>
<p>.ruby-gemset 里面有我这个 项目使用的 gem 管理的 文件夹。<br>ls -al 可以看到有 .ruby-gemset</p>
<h2 id="点一遍-所有的页面-按钮"><a href="#点一遍-所有的页面-按钮" class="headerlink" title="点一遍 所有的页面 按钮"></a>点一遍 所有的页面 按钮</h2><h2 id="1-to-01"><a href="#1-to-01" class="headerlink" title="1 to 01"></a>1 to 01</h2><p>sprintf ‘%02d’, 1</p>
<h2 id="查看进程"><a href="#查看进程" class="headerlink" title="查看进程"></a>查看进程</h2><p>ps -x | grep elastic</p>
<p>杀死进程<br>kill -9 390</p>
<p>启动 es<br>➜  bin ./elasticsearch -d</p>
<h2 id="mini-test"><a href="#mini-test" class="headerlink" title="mini test"></a>mini test</h2><p>m test/controllers/entries_controller_test.rb:130</p>
<p>RUN_COVERAGE=false rake</p>
<h2 id="自定义-bootstrapValidator-验证器"><a href="#自定义-bootstrapValidator-验证器" class="headerlink" title="自定义 bootstrapValidator 验证器"></a>自定义 bootstrapValidator 验证器</h2><p><a href="http://www.itdadao.com/articles/c15a302743p0.html" target="_blank" rel="external">http://www.itdadao.com/articles/c15a302743p0.html</a></p>
<h2 id="部署后登录错-uat-环境了，所以看到代码一直没变，哎，下次遇到这种问题，要想想"><a href="#部署后登录错-uat-环境了，所以看到代码一直没变，哎，下次遇到这种问题，要想想" class="headerlink" title="部署后登录错 uat 环境了，所以看到代码一直没变，哎，下次遇到这种问题，要想想"></a>部署后登录错 uat 环境了，所以看到代码一直没变，哎，下次遇到这种问题，要想想</h2><p>api 部署被覆盖，所以代码没有生效</p>
<h2 id="撤销-commit"><a href="#撤销-commit" class="headerlink" title="撤销 commit"></a>撤销 commit</h2><p>git reset –hard c9a9eec9c9b39f7522b9098deada053f1cca0e63<br>HEAD is now at c9a9eec Merge branch ‘master’ into dev</p>
<p>git push -f origin dev</p>
<h2 id="git-branch-命名有特殊字符，会-push-不上去"><a href="#git-branch-命名有特殊字符，会-push-不上去" class="headerlink" title="git branch 命名有特殊字符，会 push 不上去"></a>git branch 命名有特殊字符，会 push 不上去</h2><p><img src="https://ww3.sinaimg.cn/large/006tNbRwly1fectffff1gj313u02sjsm.jpg" alt=""></p>
<p><img src="https://ww2.sinaimg.cn/large/006tNbRwly1fecthdc6etj31720dy0wy.jpg" alt=""></p>
<p><img src="https://ww4.sinaimg.cn/large/006tNbRwly1fecthdiqczj315k0ymaif.jpg" alt=""></p>
<p>通过 git branch -a 可以查看当然的分支及远端分支<br>git checkout 到去掉特殊字符的分支，然后重新 push ，这个可以把当前分支的commit 也一起commit 到新的分支，不用担心漏掉。</p>
<h2 id="git-status-的时候，有一些没有清除的操作，是之前-rebase-的时候没有操作完全，后面又merge了吧"><a href="#git-status-的时候，有一些没有清除的操作，是之前-rebase-的时候没有操作完全，后面又merge了吧" class="headerlink" title="git status 的时候，有一些没有清除的操作，是之前 rebase 的时候没有操作完全，后面又merge了吧"></a>git status 的时候，有一些没有清除的操作，是之前 rebase 的时候没有操作完全，后面又merge了吧</h2><p><img src="https://ww2.sinaimg.cn/large/006tNbRwly1fecvsdo3daj317e0gs0wf.jpg" alt=""></p>
<p>所以 现在解决是通过 git rebase –continue 一个一个的把 Next commands to do (2 remaining commands) 搞到 Last commands done (7 commands done) 这样才能把之前 rebase 停止的部分一个个解决掉，每 continue 一次，检查一下 git status看有没有冲突，有冲突解决一下 。（rebase 的时候，如果有 commit 冲突，就会在那个commit 停止，要把后面的一个个 continue 才能 完成这些操作。）</p>
<h2 id="在本地-image-不加-png-这种文件后缀是不会报错的，但是到了-uat-或者生产环境就会有错。猜想有可能是-assets-pipeline-加密的时候有问题，所以没办法正常使用。"><a href="#在本地-image-不加-png-这种文件后缀是不会报错的，但是到了-uat-或者生产环境就会有错。猜想有可能是-assets-pipeline-加密的时候有问题，所以没办法正常使用。" class="headerlink" title="在本地 image 不加 .png 这种文件后缀是不会报错的，但是到了 uat 或者生产环境就会有错。猜想有可能是 assets pipeline 加密的时候有问题，所以没办法正常使用。"></a>在本地 image 不加 .png 这种文件后缀是不会报错的，但是到了 uat 或者生产环境就会有错。猜想有可能是 assets pipeline 加密的时候有问题，所以没办法正常使用。</h2><p>使用 asset_path(“themes/background/#{template[:name]}.png”) 可以拿到加密后的图片，在js中使用</p>
<h2 id="gitk-可以调取查看git的窗口"><a href="#gitk-可以调取查看git的窗口" class="headerlink" title="gitk 可以调取查看git的窗口"></a>gitk 可以调取查看git的窗口</h2><h2 id="jquery-unshift"><a href="#jquery-unshift" class="headerlink" title="jquery unshift"></a>jquery unshift</h2><p>matchFields.unshift({id: ‘x_field_1’, text: ‘扩展属性’})<br>这个结果返回的是 插入的 index，而不是 matchFields</p>
<h2 id="gem-‘zeroclipboard-rails’-配合-turbolinks-使用的时候注意，要先销毁-ZeroClipboard"><a href="#gem-‘zeroclipboard-rails’-配合-turbolinks-使用的时候注意，要先销毁-ZeroClipboard" class="headerlink" title="gem ‘zeroclipboard-rails’ 配合 turbolinks 使用的时候注意，要先销毁 ZeroClipboard"></a>gem ‘zeroclipboard-rails’ 配合 turbolinks 使用的时候注意，要先销毁 ZeroClipboard</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$(<span class="built_in">document</span>).on <span class="string">'turbolinks:load'</span>, -&gt;</div><div class="line">  <span class="keyword">return</span> unless $(<span class="string">".app-publish-container"</span>).length</div><div class="line">  ZeroClipboard.destroy()</div><div class="line">  $copyCheckinUrlDom = $(<span class="string">"#copy_checkin_url"</span>)</div><div class="line">  <span class="keyword">new</span> ZeroClipboard $copyCheckinUrlDom</div><div class="line">  $copyCheckinUrlDom.on <span class="string">'click'</span>, -&gt; App.View.showFlashNotification(<span class="string">'复制网址成功'</span>)</div></pre></td></tr></table></figure>
<h2 id="自定义-jquery-validate"><a href="#自定义-jquery-validate" class="headerlink" title="自定义 jquery-validate"></a>自定义 jquery-validate</h2><p>gd-rt-lottery 中有 callback<br>code-verify 中有 自定义验证器</p>
<h2 id="rails-异步执行"><a href="#rails-异步执行" class="headerlink" title="rails 异步执行"></a>rails 异步执行</h2><p><a href="http://edgeguides.rubyonrails.org/active_job_basics.html" target="_blank" rel="external">http://edgeguides.rubyonrails.org/active_job_basics.html</a></p>
<h2 id="Zen-Rails-Security-Checklist"><a href="#Zen-Rails-Security-Checklist" class="headerlink" title="Zen Rails Security Checklist"></a>Zen Rails Security Checklist</h2><p><a href="https://github.com/brunofacca/zen-rails-security-checklist" target="_blank" rel="external">https://github.com/brunofacca/zen-rails-security-checklist</a></p>
<h2 id="考试0秒问题"><a href="#考试0秒问题" class="headerlink" title="考试0秒问题"></a>考试0秒问题</h2><p>这个bug也是解了很久，但是我没有解决掉。<br>但是通过观察，可以发现，在 safari 中第一次打开浏览器是很容易出现 0 秒的。<br>后来定位到问题是 safari 在写跨域请求的时候，如果你之前没有访问过应用的链接，在往应用链接下写 cookie 的时候是不 work 的，在清除 safari 历史记录之后，百分百重现 0 秒。<br>因此，问题找到。解决方案就是，要在考试提交前，访问一次应用的链接。</p>
<ol>
<li>第一种想法是自己偷偷在这个应用 controller 中访问，但是是不可行的，safari 记录的貌似是浏览记录。</li>
<li>增加了考前必读，让用户先从 应用中进入考试的表单，这样提交的时候就可以跨域写 uid 了。</li>
</ol>
<h2 id="性能问题总结"><a href="#性能问题总结" class="headerlink" title="性能问题总结"></a>性能问题总结</h2><p>背景：企业版应用授权反应十分慢。<br>初步疑惑：个人版和企业版代码是一样的，为什么企业版就慢了？<br>先是查看代码，是不是代码本身问题，但是记录日志时间相差都很小，可以确定不是代码问题。<br>后来讨论之后，还是觉得部署环境有问题</p>
<ol>
<li>排除了一下代码的可能性。</li>
<li><p>继续跟进，去找企业版，看api处理速度，企业版api也没问题。</p>
</li>
<li><p>给出解决方案：在 uat （因为uat也是很慢的）</p>
<ol>
<li>写一个很简单的 controller 去访问 curl，看看是不是最简单的代码都慢，如果最简单的都慢，就可以十分肯定不是代码的问题。</li>
<li>不是代码的问题就是环境的问题，就得配合豪哥看到底是哪块的问题。</li>
</ol>
</li>
<li><p>配合发起请求，在此这过程中本可以锁定问题，但是因为在一个环节理解错了，没有定位出来。<br> 后来豪哥也是想了好几天才又一次执行错误理解的部分，结果证明确实是这里的问题，（这一块也主要想企业版环境和个人版到底有何不同）。<br> 是因为 css 等要先经过 dns 解析还是什么？去掉这块指向就快了。</p>
</li>
</ol>
<p>总结是：固定一些条件，排除可能性。不要一开始认怂。不是代码的问题也要去跟进问题，毕竟问题总是要解决的，不然留给谁？</p>
<h2 id="让单词别自动分开"><a href="#让单词别自动分开" class="headerlink" title="让单词别自动分开"></a>让单词别自动分开</h2><p>加上样式<br>word-break:break-all</p>
<h2 id="中间打点"><a href="#中间打点" class="headerlink" title="中间打点"></a>中间打点</h2><p><a href="http://stackoverflow.com/questions/7023545/truncate-string-with-rails" target="_blank" rel="external">http://stackoverflow.com/questions/7023545/truncate-string-with-rails</a></p>
<h2 id="es-task"><a href="#es-task" class="headerlink" title="es task"></a>es task</h2><p>rake es:form:reindex[20160801,20170901]<br>rake es:entry:reindex_all<br>rake es:contact:reindex_all</p>
<p>把这几个跑了之后，才能数据同步到es，es的搜索才能正确执行</p>
<h2 id="backbone-el"><a href="#backbone-el" class="headerlink" title="backbone el"></a>backbone el</h2><p>backbone 的 view 如果指定了 el，就是特定的el，如果没有指定，默认会给一个空的 div 作为 el</p>
<p>by default, backbone view’s el is set to an empty div. so, this.el and this.$el are always present.</p>
<h2 id="可以把-多个空格-格式化成一个空格"><a href="#可以把-多个空格-格式化成一个空格" class="headerlink" title="可以把 多个空格 格式化成一个空格"></a>可以把 多个空格 格式化成一个空格</h2><p>‘aa bb  cc’.squish!</p>
<h2 id="把所有的-替换成-；"><a href="#把所有的-替换成-；" class="headerlink" title="把所有的 ; 替换成 ；"></a>把所有的 ; 替换成 ；</h2><p>$textFieldDom.val().replace(/;/g, ‘；’)</p>
<h2 id="rails-获取-ip"><a href="#rails-获取-ip" class="headerlink" title="rails 获取 ip"></a>rails 获取 ip</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">def request_real_ip</div><div class="line">    return @request_real_ip if instance_variable_defined? :@request_real_ip</div><div class="line">    raw_ip = cname_request? ? request.env[&apos;HTTP_X_REAL_IP&apos;] : (request.env[&apos;HTTP_X_FORWARDED_FOR&apos;] || request.remote_ip)</div><div class="line">    @request_real_ip = raw_ip ? raw_ip.split(&apos;,&apos;).first.strip : nil</div><div class="line">  end</div><div class="line"></div><div class="line">  def cname_request?</div><div class="line">    request.env[&apos;HTTP_X_JSJ_FROM&apos;].present?</div><div class="line">  end</div></pre></td></tr></table></figure>
<h1 id="如果没有权限建-rep-，那么fork-是-fork-到了自己的公开地址"><a href="#如果没有权限建-rep-，那么fork-是-fork-到了自己的公开地址" class="headerlink" title="如果没有权限建 rep ，那么fork 是 fork 到了自己的公开地址"></a>如果没有权限建 rep ，那么fork 是 fork 到了自己的公开地址</h1><h1 id="转换-csv-为-xlsx"><a href="#转换-csv-为-xlsx" class="headerlink" title="转换 csv 为 xlsx"></a>转换 csv 为 xlsx</h1><p><a href="https://convertio.co/csv-xlsx/" target="_blank" rel="external">https://convertio.co/csv-xlsx/</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/25/最大的差距/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/25/最大的差距/" itemprop="url">最大的差距</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-25T12:47:04+08:00">
                2017-01-25
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/01/25/最大的差距/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/01/25/最大的差距/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>昨天，我本来买的是到台州的高铁，后来老妈跟我说买到杭州，转车回家更方便；然后我想，到杭州的距离更近，那么我能不能把票改签到杭州，结果没有成功，后来我把票退了，又重新买到杭州。结果退票扣了150多块钱，重新买的票比退票返的钱还多了40，前后就亏掉了190块钱。而一开始我就不退的话，中途在杭州直接下车，貌似就不会有这些亏损了吧。所以后来我后悔莫及，打电话给我对象，哭诉我的追悔莫及。后来他还把我说了一顿，你现在还后悔有啥用，亏就亏了呗。</p>
<p>是的，我当然知道，<strong>现在后悔无非是对注意力更大的亏损</strong>。但是，我还是会这样<strong>情绪化的消费自己宝贵的注意力</strong>。很多时候都是这样，<strong>你懂得一个道理并不能时时的让它鞭策你，很好的运用这个道理</strong>。所以我还是需要不断的去审视自己，去改正自己的行为。</p>
<p>今天万维钢在得到的文章里提到的泰勒·科文，说他是文化上的亿万富翁，而泰勒·科文本人的收入比美国家庭收入中位数还低（虽然跟我们比那是很高了）。我想到的是，我能不能在金钱和物质上不富有的情况下，让自己的思想水平等精神上变的比较富有？往往我们在讨论一个人应该在精神上更加富有的时候，都是一些在金钱和物质满足不了自己之后才拿出来的说法，貌似在安慰自己似的。我以前也是这样，但是我现在想达到的精神上的富足并不是为了安慰自己，而是我意识到了，<strong>人生最大的差距或许就在精神层面。而物质财富上的差距是可以通过精神上差距的缩小而缩小的。</strong></p>
<p>有一期罗辑思维的视频里面说的，<strong>文明是副产品</strong>。现在想想，<strong>物质财富也是精神思想上的副产品</strong>。一个有思想、会进取、有能力的人是不会担心物质财富的问题的吧。因为现在的社会我看到的是，你有能力就不怕创造不了财富，社会上到处需要这样的能力。</p>
<p><strong>我的生活，其实追究到底，物质生活不能提升的最本质的原因，就是自己没有足够创造那些物质生活的能力。</strong>我虽然没有抱怨过社会，但我经常抱怨自己为什么没有这样牛逼的能力？</p>
<p><strong>如果看到了这一点的话，其实内心应该是更充满希望的。因为能力是可以通过自己的学习、自己的思考、自己的进取去提升的，是的，是有很大的希望的。所以，不管是多绝望多焦虑的情况，我都还是有一个坚定的信仰的，学习是一种信仰！</strong></p>
<p><strong>我从来没有满足过自己的现状，从而，我就知道，我从来也不能停止进取，停止学习！</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/21/来小金的第一个年会/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/21/来小金的第一个年会/" itemprop="url">来小金的第一个年会</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-21T01:07:04+08:00">
                2017-01-21
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/01/21/来小金的第一个年会/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/01/21/来小金的第一个年会/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我是一个爱哭的女孩，不管你是看到我哪一面的人，我都得承认，<strong>我很爱哭</strong>。曾经因为这个都想找个心理医生看看。</p>
<p>嗯，我写下这第一句话的时候就噙着泪水，因为此刻，我还在为自己来到小金的第一个年会感动着，为自己这三个月以来受到的帮助感动着，为自己来到了棒棒的团队感动着。<strong>我觉得自己生平第一次被一个公司肯定。我以最真实的面貌面试上了这家如此棒的公司，并且享受着在这里的时光。</strong></p>
<p>从刚面试的时候，方方和alice对我的肯定，给我 pair 的晓峰对我的肯定，以及后来姜姐、家骥、波波、东东，他们对我的帮助，让我的 rails 和解决问题的能力得以进步和提高。大家应该能感受到，对于刚进入公司并且技术很薄弱的我来说，这些肯定和帮助都给了我多大鼓舞和感动。一次次面临具体问题的时候，都是他们在我最着急的时刻给我提示，帮我一起解决问题，我词穷，貌似我说的都表达不出这其中的滋味。每一次解决问题后都能让我兴奋好一阵子。</p>
<p>小金的每个人都很有特点，我想就像今天春雷他们表演的段子一样，每个人都能挑出来说的岂止是虚构的段子，小金充满欢乐，充满正能量，也让我觉得来到小金很幸运很幸福。<strong>三人行必有我师，我觉得小金的每位员工，都有值得我学习的地方。</strong></p>
<p>我回北京跟一起培训的同学有聚会过，我觉得他们都很优秀，但是貌似和以前的朋友一样的是少不了对公司的抱怨，<strong>但是我很骄傲，我在饭桌上把小金夸了一遍，我说为什么我在的团队超级棒，根本没有你们说的这些问题？他们或许会羡慕我待的团队吧。幸福ing…</strong></p>
<p>像题目开头说的，我爱哭，年会大家一起 happy 的时候我想哭，家人团圆的时候我想哭，受到了一点鼓舞我会哭。<strong>或许我就是这样容易受到感动，但是这样似乎也很好，让我感受到很多暖暖的情谊。</strong></p>
<p>2017，让我和小金一起成长！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/25/gem wicked_pdf 的使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/25/gem wicked_pdf 的使用/" itemprop="url">gem wicked_pdf 的使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-12-25T21:01:04+08:00">
                2016-12-25
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/12/25/gem wicked_pdf 的使用/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/12/25/gem wicked_pdf 的使用/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>参考 github 网址：<a href="">https://github.com/mileszs/wicked_pdf</a><br>注：我的是 gem ‘rails’, ‘~&gt; 4.2’，所以github官网上有些配置不需要配置<br>参考链接:<br> <a href="https://reinteractive.com/posts/270-wickedpdf-and-custom-fonts-in-rails" target="_blank" rel="external">https://reinteractive.com/posts/270-wickedpdf-and-custom-fonts-in-rails</a><br> <a href="http://cnedelcu.blogspot.com/2015/04/wkhtmltopdf-chinese-character-support.html" target="_blank" rel="external">http://cnedelcu.blogspot.com/2015/04/wkhtmltopdf-chinese-character-support.html</a><br> <a href="https://blog.ragnarson.com/2014/01/13/generating-pdfs-with-custom-fonts-using-wkhtmltopdf.html" target="_blank" rel="external">https://blog.ragnarson.com/2014/01/13/generating-pdfs-with-custom-fonts-using-wkhtmltopdf.html</a></p>
<p>1.添加 gem 到 Gemfile</p>
<figure class="highlight rb"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">gem <span class="string">'wkhtmltopdf-binary'</span> <span class="comment">#(wicked_pdf 依赖这个 gem)</span></div><div class="line">gem <span class="string">'wicked_pdf'</span></div><div class="line"><span class="string">``</span><span class="string">`  </span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">2.终端执行 `</span>rails generate wicked_pdf<span class="string">`,这会生成一个文件 `</span>config/initializers/wicked_pdf.rb<span class="string">`</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">3.在 controller 中加入 format.pdf, 如果没有什么特殊的样式，pdf 和 html 引入的 js 和 css 都是一致的，因为要加入 wicked_pdf 的 tag，所以我区分了两个 layout</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">`</span><span class="string">``</span>rb</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThingsController</span> &lt; ApplicationController</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">show</span></span></div><div class="line">    respond_to <span class="keyword">do</span> <span class="params">|format|</span></div><div class="line">      format.html <span class="keyword">do</span></div><div class="line">        load_exam_entry</div><div class="line">        render <span class="string">'show'</span>, <span class="symbol">layout:</span> <span class="string">'exams'</span></div><div class="line">      <span class="keyword">end</span></div><div class="line">      format.pdf <span class="keyword">do</span></div><div class="line">        load_exam_entry</div><div class="line">        render <span class="symbol">pdf:</span> <span class="string">"file_name"</span>,<span class="symbol">layout:</span> <span class="string">'exams_pdf'</span>   <span class="comment"># Excluding ".pdf" extension.</span></div><div class="line">      <span class="keyword">end</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>4.<code>layout: &#39;exams_pdf&#39;</code> 的配置, 修改的地方就是把 <code>&lt;%= stylesheet_link_tag &#39;exams&#39; %&gt;
  &lt;%= javascript_include_tag &#39;exams&#39; %&gt;</code> 改成 <code>&lt;%= wicked_pdf_stylesheet_link_tag &#39;exams&#39; %&gt;
  &lt;%= wicked_pdf_javascript_include_tag &#39;exams&#39; %&gt;</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> (@<span class="attr">exam.try</span> <span class="attr">:paper</span>)<span class="attr">.try</span>(<span class="attr">:name</span>) || '考试结束' %&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">'utf-8'</span> /&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">%=</span> <span class="attr">favicon_link_tag</span>('<span class="attr">favicon.ico</span>') %&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">%=</span> <span class="attr">wicked_pdf_stylesheet_link_tag</span> '<span class="attr">exams</span>' %&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">%=</span> <span class="attr">wicked_pdf_javascript_include_tag</span> '<span class="attr">exams</span>' %&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">%=</span>  <span class="attr">render</span> '<span class="attr">shared</span>/<span class="attr">track</span>/<span class="attr">site_master</span>' %&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">%=</span> <span class="attr">csrf_meta_tags</span> %&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">%=</span> <span class="attr">yield</span> %&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>5.以上四步就可以预览 pdf ；</p>
<p>6.这里加上 <code>dpi: 72</code> 可以加快生成速度，<code>disposition: &#39;attachment&#39;</code> 这个是作为附件下载，而不是网页预览。</p>
<figure class="highlight rb"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">render <span class="symbol">pdf:</span> file_name,<span class="symbol">layout:</span> <span class="string">'exams_pdf'</span>, <span class="symbol">encoding:</span> <span class="string">'UTF-8'</span>, <span class="symbol">dpi:</span> <span class="number">72</span>, <span class="symbol">disposition:</span> <span class="string">'attachment'</span></div></pre></td></tr></table></figure>
<p>7.由于 <code>wkhtmltopdf</code> 是依赖系统的字体生成 pdf ，所以要在服务器上安装相应字体，不然到 uat 或者生产环境，没有字体的话，中文都会显示成小框框。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/19/1. 怎么查看某个方法的原代码？比如 simple_form_for/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/19/1. 怎么查看某个方法的原代码？比如 simple_form_for/" itemprop="url">问题列表</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-12-19T16:22:04+08:00">
                2016-12-19
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/12/19/1. 怎么查看某个方法的原代码？比如 simple_form_for/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/12/19/1. 怎么查看某个方法的原代码？比如 simple_form_for/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>怎么查看某个方法的原代码？比如 simple_form_for<br>答：github 啊，全世界的开源项目都在这里啊。google 搜索 simple_form ，会把这个项目所在的 github 找出来。 git clone 命令能克隆到本地。想怎么看怎么看，但是因为这是 gem，所以目录会和我们写的项目稍微不一样吧。</li>
</ol>
<p><img src="http://ww2.sinaimg.cn/large/006tNbRwjw1fa4sevepvtj31kw0x2gtx.jpg" alt=""></p>
<ol>
<li>=&gt;   这个符号是什么意思，怎么使用？<br>答：这个是 ruby 中的 hash ，google 搜索 关键词 ruby hash，跟着google出来的内容，把每一行代码在终端里输入试试。在终端输入 irb ，可立即开启 ruby 运行环境。</li>
</ol>
<p><img src="http://ww3.sinaimg.cn/large/006tNbRwjw1fa4siq3u5bj30y0082mxu.jpg" alt=""></p>
<ol>
<li>custom route 和named route有什么区别？<br>答：custom route 指的是自定义 route 吧，就是自定义路径。<br>除了 rails 自动封装好的那七个之外，我觉得都是自定义。<br>预设的七个 「 new create edit update delete index show 」.<br>之外的都是自定义的吧。比如</li>
</ol>
<p><img src="http://ww4.sinaimg.cn/large/006tNbRwjw1fa6z2j9b1lj30os0caacb.jpg" alt=""></p>
<ol>
<li><p>params中的数据是怎么得到的？<br>http 请求，也就是 HttpRequest ,在这个里面都会有请求的信息，在控制台上能看到。params 就是通过 request.getParams 这种方法获得的，只不过 rails 给自动获取了，我们通过 params[:id] 直接就能得到 id 的值了。</p>
</li>
<li><p>URL和routes 有什么区别？<br>URL 是指链接，routes是指路由。<br>比如：<a href="http://localhost:8081/paper/form_setting/56/edit" target="_blank" rel="external">http://localhost:8081/paper/form_setting/56/edit</a> 这是 url，<br>routes指的是 routes.rb 中那些路由设置吧，你看看这个文件就明白了吧。</p>
</li>
</ol>
<p><img src="http://ww2.sinaimg.cn/large/006tNbRwjw1fa6z8y1axaj30x005a3zy.jpg" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/10/30/Using-select-reject-collect-inject-and-detect/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/30/Using-select-reject-collect-inject-and-detect/" itemprop="url">Using select, reject, collect, inject and detect.</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-30T16:40:42+08:00">
                2016-10-30
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/10/30/Using-select-reject-collect-inject-and-detect/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/10/30/Using-select-reject-collect-inject-and-detect/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>参考链接：<br><a href="http://queirozf.com/entries/ruby-map-each-collect-inject-reject-select-quick-reference" target="_blank" rel="external">http://queirozf.com/entries/ruby-map-each-collect-inject-reject-select-quick-reference</a></p>
<p><a href="http://matthewcarriere.com/2008/06/23/using-select-reject-collect-inject-and-detect/" target="_blank" rel="external">http://matthewcarriere.com/2008/06/23/using-select-reject-collect-inject-and-detect/</a></p>
<h2 id="for-遍历数组-，并打印出来每一个元素"><a href="#for-遍历数组-，并打印出来每一个元素" class="headerlink" title="for 遍历数组 ，并打印出来每一个元素"></a>for 遍历数组 ，并打印出来每一个元素</h2><p>code:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</div><div class="line"><span class="keyword">for</span> n <span class="keyword">in</span> a</div><div class="line">  puts n</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p><img src="http://ww2.sinaimg.cn/large/72f96cbajw1f9anecw702j20h809c3z2.jpg" alt=""></p>
<p>这个可以 work，但 not very… Ruby.<br>下面这个才是，ruby 中的 <code>iterator</code> 。</p>
<h2 id="each-遍历数组-，并打印出来每一个元素"><a href="#each-遍历数组-，并打印出来每一个元素" class="headerlink" title="each 遍历数组 ，并打印出来每一个元素"></a>each 遍历数组 ，并打印出来每一个元素</h2><p>code:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">a.each <span class="keyword">do</span> <span class="params">|n|</span></div><div class="line">  puts n</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/72f96cbajw1f9anf9hs8oj20g808mmxl.jpg" alt=""></p>
<h2 id="Building-a-list-of-items-from-the-array-using-select"><a href="#Building-a-list-of-items-from-the-array-using-select" class="headerlink" title="Building a list of items from the array using select"></a><strong>Building a list of items from the array using select</strong></h2><h3 id="select-返回符合条件的-array"><a href="#select-返回符合条件的-array" class="headerlink" title="select , 返回符合条件的 array"></a>select , 返回符合条件的 array</h3><p>code:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</div><div class="line">a.select &#123;<span class="params">|n|</span> n &gt; <span class="number">2</span>&#125;</div></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/72f96cbajw1f9angg6yq5j20ma046aad.jpg" alt=""></p>
<h3 id="reject，返回不符合条件的-array"><a href="#reject，返回不符合条件的-array" class="headerlink" title="reject，返回不符合条件的 array"></a>reject，返回不符合条件的 array</h3><p><strong>reject 当 n&gt;2 为 false 时才会return</strong></p>
<p>code:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</div><div class="line">a.reject &#123;<span class="params">|n|</span> n &gt; <span class="number">2</span>&#125;</div></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/72f96cbajw1f9anig81y1j20jo04wwew.jpg" alt=""></p>
<h3 id="collect，返回-运算-后的-array"><a href="#collect，返回-运算-后的-array" class="headerlink" title="collect，返回 运算 后的 array"></a>collect，返回 运算 后的 array</h3><p>code:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</div><div class="line">a.collect &#123;<span class="params">|n|</span> n*n&#125;</div></pre></td></tr></table></figure>
<p><img src="http://ww3.sinaimg.cn/large/72f96cbajw1f9anjd0q3xj20ku04wt94.jpg" alt=""></p>
<h2 id="Total-the-items-in-an-array-using-inject"><a href="#Total-the-items-in-an-array-using-inject" class="headerlink" title="Total the items in an array using inject"></a>Total the items in an array using inject</h2><h3 id="inject-，sum-所有元素并返回计算结果"><a href="#inject-，sum-所有元素并返回计算结果" class="headerlink" title="inject ，sum 所有元素并返回计算结果"></a>inject ，sum 所有元素并返回计算结果</h3><p>code:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</div><div class="line">a.inject &#123;<span class="params">|acc,n|</span> acc + n&#125;</div></pre></td></tr></table></figure>
<p><img src="http://ww2.sinaimg.cn/large/72f96cbajw1f9anki7az0j20kw04w3yy.jpg" alt=""></p>
<h3 id="inject-with-parameter，带初始参数，从参数开始累计，计算并返回"><a href="#inject-with-parameter，带初始参数，从参数开始累计，计算并返回" class="headerlink" title="inject with parameter，带初始参数，从参数开始累计，计算并返回"></a>inject with parameter，带初始参数，从参数开始累计，计算并返回</h3><p>code:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</div><div class="line">a.inject(<span class="number">10</span>) &#123;<span class="params">|acc,n|</span> acc + n&#125;</div></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/72f96cbajw1f9annbo0dgj20k0050t94.jpg" alt=""></p>
<h3 id="inject-return-an-array"><a href="#inject-return-an-array" class="headerlink" title="inject return an array"></a>inject return an array</h3><p>code:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</div><div class="line">a.inject([]) &#123;<span class="params">|acc,n|</span> acc &lt;&lt; n+n&#125;</div></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/72f96cbajw1f9anp5uxiwj20m804yaaj.jpg" alt=""></p>
<h2 id="Find-an-item-in-the-array-using-detect"><a href="#Find-an-item-in-the-array-using-detect" class="headerlink" title="Find an item in the array using detect"></a>Find an item in the array using detect</h2><h3 id="detect-查找一项"><a href="#detect-查找一项" class="headerlink" title="detect 查找一项"></a>detect 查找一项</h3><p>code:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</div><div class="line">a.detect &#123;<span class="params">|n|</span> n == <span class="number">3</span>&#125;</div></pre></td></tr></table></figure>
<p><img src="http://ww4.sinaimg.cn/large/72f96cbajw1f9aos0zsmfj20h403y3yq.jpg" alt=""></p>
<p>返回 3，如果没有找到，返回 <code>nil</code> 。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/10/25/把旧的数据库中的数据-load-到新数据库-新数据库表字段有差异/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/25/把旧的数据库中的数据-load-到新数据库-新数据库表字段有差异/" itemprop="url">把旧的数据库中的数据 load 到新数据库(新数据库表字段有差异)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-25T16:42:40+08:00">
                2016-10-25
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/10/25/把旧的数据库中的数据-load-到新数据库-新数据库表字段有差异/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/10/25/把旧的数据库中的数据-load-到新数据库-新数据库表字段有差异/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="把旧的数据库中的数据-load-到新数据库-新数据库表字段有差异"><a href="#把旧的数据库中的数据-load-到新数据库-新数据库表字段有差异" class="headerlink" title="把旧的数据库中的数据 load 到新数据库(新数据库表字段有差异)"></a>把旧的数据库中的数据 load 到新数据库(新数据库表字段有差异)</h1><ol>
<li><p>安装 <code>gem &#39;yaml_db&#39;</code><br>照例：<br> <code>Gemfile</code> 中 加入 <code>gem &#39;yaml_db&#39;</code> 并 <code>bundle</code></p>
</li>
<li><p>在旧的数据库环境下（ database.yml 连接对应的数据库），运行 <code>rake db:data:dump</code>,会生成文件 <code>db/data.yml</code>。这个里面会把数据导出成数组格式。<br> 如下：</p>
 <figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">users:</span></div><div class="line">  <span class="symbol">columns:</span></div><div class="line">  - id</div><div class="line">  - email</div><div class="line">  - nickname</div><div class="line">  - created_at</div><div class="line">  - updated_at</div><div class="line">  <span class="symbol">records:</span></div><div class="line">  - - <span class="number">1</span></div><div class="line">    - a@a.com</div><div class="line">    - <span class="number">1</span></div><div class="line">    - ss</div><div class="line">    - <span class="string">'2016-10-25 11:35:41'</span></div><div class="line">    - <span class="string">'2016-10-25 14:26:11'</span></div></pre></td></tr></table></figure>
</li>
<li><p>安装 <code>gem &#39;bulk_insert&#39;</code><br> 照例：<br> <code>Gemfile</code> 中 加入 <code>gem &#39;bulk_insert&#39;</code> 并 <code>bundle</code></p>
</li>
<li><p>在新的数据库环境下（修改database.yml连接对应的数据库），写 task ，读取data.yml文件，并写入新的数据库。<br> <code>rake -T</code> 可以查看所有 rake 命令，找到自己的 rake 命令 并执行(本例：<code>rake new_db:new_db_load</code>)。</p>
<p> task 代码：</p>
<p> 文件目录：<code>lib/tasks/new_db_migration.rake</code></p>
 <figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">namespace <span class="symbol">:new_db</span> <span class="keyword">do</span></div><div class="line">  desc <span class="string">'migrate old db data to new db'</span></div><div class="line">  task <span class="symbol">:new_db_load</span> =&gt; <span class="symbol">:environment</span> <span class="keyword">do</span></div><div class="line"></div><div class="line">    old_db = YAML.load_file(<span class="string">'db/data.yml'</span>)</div><div class="line"></div><div class="line">    User.bulk_insert(<span class="symbol">set_size:</span> <span class="number">100</span>) <span class="keyword">do</span> <span class="params">|worker|</span></div><div class="line">      old_db[<span class="string">'users'</span>][<span class="string">'records'</span>].each <span class="keyword">do</span> <span class="params">|record|</span></div><div class="line">        worker.add(</div><div class="line">            <span class="symbol">id:</span> record[<span class="number">0</span>], <span class="symbol">email:</span> record[<span class="number">1</span>], <span class="symbol">status:</span> (record[<span class="number">2</span>] == <span class="number">1</span>), <span class="symbol">nick_name:</span> record[<span class="number">3</span>], <span class="symbol">created_at:</span> record[<span class="number">4</span>], <span class="symbol">updated_at:</span> record[<span class="number">5</span>]</div><div class="line">        )</div><div class="line">      <span class="keyword">end</span></div><div class="line">    <span class="keyword">end</span></div><div class="line"></div><div class="line">    puts <span class="string">'user finish'</span></div><div class="line"></div><div class="line">    puts <span class="string">'done!'</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p> 上面我做的变更是 <code>status</code> ，原来是 0 或者1 ，现在改成 true 或 false ，通过 <code>status: (record[2] == 1)</code> 来符合新的结构。其余的变更都可以类似处理。</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/10/24/gem-gaffe-异常页面美化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/24/gem-gaffe-异常页面美化/" itemprop="url">gem 'gaffe' 异常页面美化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-24T22:49:26+08:00">
                2016-10-24
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/10/24/gem-gaffe-异常页面美化/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/10/24/gem-gaffe-异常页面美化/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>参考链接：<a href="https://github.com/mirego/gaffe" target="_blank" rel="external">https://github.com/mirego/gaffe</a></p>
<p>step1.  gem ‘gaffe’</p>
<p>step2.  bundle install</p>
<p>step3. 在 <code>config/initializers/gaffe.rb</code> 中写入</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># config/initializers/gaffe.rb</span></div><div class="line">Gaffe.configure <span class="keyword">do</span> <span class="params">|config|</span></div><div class="line">  config.errors_controller = <span class="string">'ErrorsController'</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">Gaffe.enable!</div></pre></td></tr></table></figure>
<p>step4. 创建<code>ErrorsController</code></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ErrorsController</span> &lt; ApplicationController</span></div><div class="line">  <span class="keyword">include</span> Gaffe::Errors</div><div class="line"></div><div class="line">  <span class="comment"># Make sure anonymous users can see the page</span></div><div class="line">  skip_before_action <span class="symbol">:authenticate_user!</span></div><div class="line"></div><div class="line">  <span class="comment"># Override 'error' layout</span></div><div class="line">  layout <span class="string">'application'</span></div><div class="line"></div><div class="line">  <span class="comment"># Render the correct template based on the exception “standard” code.</span></div><div class="line">  <span class="comment"># Eg. For a 404 error, the `errors/not_found` template will be rendered.</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">show</span></span></div><div class="line">    <span class="comment"># Here, the `<span class="doctag">@exception</span>` variable contains the original raised error</span></div><div class="line">    render <span class="string">"errors/<span class="subst">#&#123;@rescue_response&#125;</span>"</span>, <span class="symbol">status:</span> @status_code</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>step5. 创建自己的（也可以用它默认的），目录为<code>views/errors/not_found.erb</code> 这种。如下图是这个gem的文件，我们可以覆盖：</p>
<p><img src="http://ww3.sinaimg.cn/large/801b780ajw1f93pc5yca4j20oq0p4n0i.jpg" alt=""></p>
<p>step6. 修改<code>config/environments/development.rb</code>，可以看到报错的页面都会给特定的页面，比如404.erb等，但是在开发或者测试环境还是不要设置，因为错误信息看不到，我们自己不好看错误。(Rails prefers to render its own debug-friendly errors in the development environment, which is totally understandable. However, if you want to test Gaffe’s behavior in development you’ll have to edit the config/environments/development.rb file.)<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Make Rails use `exceptions_app` in development</span></div><div class="line">config.consider_all_requests_local = <span class="literal">false</span></div></pre></td></tr></table></figure></p>
<p>测试环境可以这样干：<br><code>config/environments/test.rb</code><br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Make Rails use `exceptions_app` in tests</span></div><div class="line">config.consider_all_requests_local = <span class="literal">false</span></div><div class="line"></div><div class="line"><span class="comment"># Render exceptions instead of raising them</span></div><div class="line">config.action_dispatch.show_exceptions = <span class="literal">true</span></div></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/10/24/jquery-fileupload-上传/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/24/jquery-fileupload-上传/" itemprop="url">jquery fileupload 上传</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-24T22:33:02+08:00">
                2016-10-24
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/10/24/jquery-fileupload-上传/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/10/24/jquery-fileupload-上传/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>参考链接：<a href="https://github.com/carrierwaveuploader/carrierwave" target="_blank" rel="external">https://github.com/carrierwaveuploader/carrierwave</a></p>
<h2 id="使用-jquery-fileupload-js-上传图片"><a href="#使用-jquery-fileupload-js-上传图片" class="headerlink" title="使用 jquery.fileupload.js 上传图片"></a>使用 <code>jquery.fileupload.js</code> 上传图片</h2><ol>
<li><code>gem &#39;carrierwave&#39; 和 gem &#39;mini_magick&#39;</code></li>
<li><code>bundle</code></li>
<li>执行<code>rails generate uploader image</code> 会生成<code>app/uploaders/image_uploader.rb</code></li>
</ol>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># encoding: utf-8</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImageUploader</span> &lt; CarrierWave::Uploader::<span class="title">Base</span></span></div><div class="line"></div><div class="line">  <span class="comment"># Include RMagick or MiniMagick support:</span></div><div class="line">  <span class="comment"># include CarrierWave::RMagick</span></div><div class="line">  <span class="keyword">include</span> CarrierWave::MiniMagick</div><div class="line"></div><div class="line"></div><div class="line">  <span class="comment"># Choose what kind of storage to use for this uploader:</span></div><div class="line">  storage <span class="symbol">:file</span></div><div class="line">  <span class="comment"># storage :fog</span></div><div class="line"></div><div class="line">  <span class="comment"># Override the directory where uploaded files will be stored.</span></div><div class="line">  <span class="comment"># This is a sensible default for uploaders that are meant to be mounted:</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">store_dir</span></span></div><div class="line">    <span class="string">"uploads/"</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  process <span class="symbol">resize_to_fit:</span> [<span class="number">800</span>, <span class="number">800</span>]</div><div class="line"></div><div class="line">  version <span class="symbol">:small</span> <span class="keyword">do</span></div><div class="line">    process <span class="symbol">resize_to_fit:</span> [<span class="number">200</span>, <span class="number">200</span>]</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<ol>
<li>在<code>controller</code>中 action 可以使用<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">uploader = ImageUploader.new</div><div class="line">uploader.store!(my_file)  </div><div class="line">uploader.url <span class="comment"># =&gt; '/url/to/my_file.png'               # size: 800x600</span></div><div class="line">uploader.thumb.url <span class="comment"># =&gt; '/url/to/thumb_my_file.png'   # size: 200x200</span></div></pre></td></tr></table></figure>
</li>
</ol>
<p>我的场景是，在页面用jquery uploader 到后面action上传图片，回传image_url 到页面，页面点击保存的时候再保存到相关的数据库表。</p>
<p>见截图：</p>
<figure class="highlight rb"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImagesController</span> &lt; ApplicationController</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">create</span></span></div><div class="line">    uploader = ImageUploader.new</div><div class="line">    uploader.store!(params[<span class="string">'picture-upload'</span>])</div><div class="line"></div><div class="line">    render <span class="symbol">json:</span> &#123;<span class="symbol">image_url:</span> uploader.small.url&#125;</div><div class="line"></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">pictureUpload</span>(<span class="params">prize</span>)</span>&#123;</div><div class="line">    $(<span class="string">".picture-upload"</span>).click();</div><div class="line">    $<span class="string">".picture-upload"</span>).fileupload(&#123;</div><div class="line">        type:<span class="string">'POST'</span>,</div><div class="line">        url:<span class="string">'/images'</span>,</div><div class="line">        dataType: <span class="string">'json'</span>,</div><div class="line">        singleFileUploads: <span class="literal">true</span>,</div><div class="line">        maxFileSize: <span class="number">2000000</span>,</div><div class="line">        start: <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">            $(<span class="string">".progress-upload"</span>).removeClass(<span class="string">'hide'</span>);</div><div class="line">            $(<span class="string">".upload-button i"</span>).addClass(<span class="string">'hide'</span>);</div><div class="line">            $(<span class="string">".upload-button span"</span>).addClass(<span class="string">'hide'</span>);</div><div class="line">        &#125;,</div><div class="line">        progressall: <span class="function"><span class="keyword">function</span>(<span class="params">e, data</span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> progress = <span class="built_in">parseInt</span>(data.loaded/data.total * <span class="number">100</span>, <span class="number">10</span>);</div><div class="line">            $(<span class="string">".progress-upload .bar"</span>).css(<span class="string">'width'</span>,progress + <span class="string">'%'</span>);</div><div class="line">        &#125;,</div><div class="line">        done: <span class="function"><span class="keyword">function</span>(<span class="params">e, data</span>)</span>&#123;</div><div class="line">            $(<span class="string">".edit-button .prize-picture"</span>).attr(<span class="string">'src'</span>,data.result.image_url);</div><div class="line">            $(<span class="string">".upload-button"</span>).remove();</div><div class="line">            $(<span class="string">".edit-button"</span>).removeClass(<span class="string">'hide'</span>);</div><div class="line">        &#125;,</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/10/04/ch04-对象、变量和常量/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈云莉 m18301662790@gmail.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="这里有我的脚丫印😄">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/04/ch04-对象、变量和常量/" itemprop="url">ch04 对象、变量和常量</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-04T13:55:32+08:00">
                2016-10-04
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/10/04/ch04-对象、变量和常量/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/10/04/ch04-对象、变量和常量/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>对象</li>
<li>类</li>
<li>变量</li>
<li>常量</li>
</ul>
<h2 id="4-1-对象"><a href="#4-1-对象" class="headerlink" title="4.1 对象"></a>4.1 对象</h2><p>在 Ruby 中，表现数据的基本单位称为对象（object）。</p>
<ul>
<li><p>数值对象</p>
<p>  1、-10、3.1415 等是表示数字的对象，另外还有表示矩阵、复数、素数、公式的对象。</p>
</li>
<li><p><strong>字符串对象</strong></p>
<p>  “你好”、”hello” 等表示文字的对象。</p>
</li>
<li><p><strong>数组对象、散列对象</strong></p>
<p>  表示多个数据的集合的对象。</p>
</li>
<li><p><strong>正则表达式对象</strong></p>
<p>  表示匹配模式的对象。</p>
</li>
<li><p><strong>时间对象</strong></p>
<p>  比如 ”2013年5月30日早上9点“ 等表示时间的对象。</p>
</li>
<li><p><strong>文件对象</strong></p>
<p>  一般我们可以理解为表示文件本身的对象，但确切来说，它是对文件进行读写操作的对象。</p>
</li>
<li><p><strong>符号对象</strong></p>
<p>  表示用于识别方法等名称的标签的对象。</p>
</li>
</ul>
<p>除此之外， Ruby 还有<strong>范围对象（Range）</strong>、<strong>异常对象（Exception）</strong>等。</p>
<h2 id="4-2-类"><a href="#4-2-类" class="headerlink" title="4.2 类"></a>4.2 类</h2><p>Ruby 的类（class）表示的就是对象的种类。</p>
<p>对象拥有什么特性，这些都是由类来决定的。</p>
<p>下图是刚刚介绍过的对象及其所属类的对应关系（这些都是 Ruby 默认提供的）：</p>
<p><img src="http://ww2.sinaimg.cn/large/006y8lVagw1f8g1wsprktj30mk0bx75q.jpg" alt=""></p>
<p>「 XX 类的对象 」，我们一般会说成 <strong>「 XX 类的实例（Instance） 」</strong>。</p>
<p>例如，我们会说 「 字符串对象 <code>foo</code> 是 String 类的实例 」。</p>
<h2 id="4-3-变量"><a href="#4-3-变量" class="headerlink" title="4.3 变量"></a>4.3 变量</h2><p><strong>变量就像是对象的名片。</strong></p>
<p>Ruby 中有<strong>四种类型</strong>的变量。</p>
<ul>
<li><strong>局部变量</strong>（local variable）    </li>
<li><strong>全局变量</strong>（global variable）</li>
<li><strong>实例变量</strong>（instance variable）</li>
<li><strong>类变量</strong>（class variable）</li>
</ul>
<p>变量的<strong>命名方式决定了变量的种类</strong>。</p>
<ul>
<li><strong>局部变量<br>  以英文字母或者_开头</strong></li>
<li><strong>全局变量<br>  以$开头</strong></li>
<li><strong>实例变量<br>  以@开头</strong></li>
<li><strong>类变量<br>  以@@开头</strong></li>
</ul>
<p>除以上四种类型外，还有名为伪变量（还有一种叫预定义变量，书中没有详细介绍）的特殊变量。<br>伪变量是 Ruby 预先定义好的代表某特定值的特殊变量，因此即使我们在程序里给伪变量赋值，它的值也不会改变。Ruby中，nil、true、false、self等都是伪变量。它们表面上虽然看着像变量，但实际的行为又与变量有差别，因此称为伪变量。</p>
<p><strong>局部变量与全局变量</strong></p>
<p>局部变量是指 变量在程序中的有效范围（也称<strong>变量的作用域</strong>）是局部的。</p>
<p>全局变量，不管变量在程序的哪个部分使用，程序就认为它们是同一个变量。</p>
<p><img src="http://ww2.sinaimg.cn/large/006y8lVagw1f8g31t0hwej30fq09kt9w.jpg" alt=""></p>
<p>局部变量作用范围只在自己所在的代码块中。全局变量作用范围在所有程序中。</p>
<p><strong>一般并不推荐使用全局变量。全局变量在程序的任何地方都可以修改，因此在规模较大的程序中使用时，会增加程序不必要的复杂度，给阅读程序、修改程序造成意想不到的麻烦。</strong></p>
<p>首次给局部变量赋值的同时，该局部变量就被初始化了。如果引用了未初始化的局部变量，会抛出异常。</p>
<p>执行示例：</p>
<p><img src="http://ww3.sinaimg.cn/large/006y8lVagw1f8g39g6j61j30zw0aa40s.jpg" alt=""></p>
<p>实例变量与类变量，第8章会详细说明。</p>
<h2 id="4-4-常量"><a href="#4-4-常量" class="headerlink" title="4.4 常量"></a>4.4 常量</h2><p>常量的作用和变量一样，是某个对象的 「 名片 」。<strong>与变量不同的是，对已经赋值的常量再进行赋值时，Ruby 会做出警告。</strong></p>
<p>执行示例：</p>
<p><img src="http://ww1.sinaimg.cn/large/006y8lVagw1f8g3e4m9t6j30pg08kq43.jpg" alt=""></p>
<p>常量以大写英文字母开头。<br>例如 Ruby 的运行版本「 RUBY_VERSION 」、运行平台「 RUBY_PLATFORM 」、命令行参数数组「 RARGV 」等，都是 Ruby 预定义好的常量。</p>
<h2 id="4-5-保留字"><a href="#4-5-保留字" class="headerlink" title="4.5 保留字"></a>4.5 保留字</h2><p>Ruby 关键字一览表：</p>
<p><img src="http://ww4.sinaimg.cn/large/006y8lVagw1f8g3lcpnimj30si07rdhe.jpg" alt=""></p>
<p>这些关键字被称为保留字，如果用做变量名，Ruby 会提示我们语法错误。</p>
<p>执行示例：</p>
<p><img src="http://ww1.sinaimg.cn/large/006y8lVagw1f8g3oko6axj30zw06wt9z.jpg" alt=""></p>
<h2 id="4-6-多重赋值"><a href="#4-6-多重赋值" class="headerlink" title="4.6 多重赋值"></a>4.6 多重赋值</h2><p>除了「 变量 = 值 」这种给变量赋值的方法，Ruby 中还提供了<strong>只用一个表达式就能给多个变量赋值的简便方法</strong>。</p>
<h3 id="4-6-1"><a href="#4-6-1" class="headerlink" title="4.6.1"></a>4.6.1</h3><p>比如：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">a = <span class="number">1</span></div><div class="line">b = <span class="number">2</span></div><div class="line">c = <span class="number">3</span></div><div class="line"></div><div class="line"><span class="comment"># 可以简化为</span></div><div class="line">a, b, c = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span></div></pre></td></tr></table></figure>
<p>如果一组不相关的变量进行多重赋值，程序会变的难懂，因此建议<strong>对彼此相关变量进行多重赋值</strong>。</p>
<p>即使 = 号左右两边列出的数量不相等，Ruby 也不会报错。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a, b, c, d = <span class="number">1</span>, <span class="number">2</span>  </div><div class="line"><span class="comment"># a = 1  b = 2  c = nil  d = nil</span></div></pre></td></tr></table></figure>
<p>变量部分比较少时，Ruby 会忽略掉该值，不会分配多余的值。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a, b, c = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span></div><div class="line"><span class="comment"># a = 1  b = 2  c = 3  4不会被分配</span></div></pre></td></tr></table></figure>
<p>变量前加上 * ，表示 Ruby 会将未分配的值封装为数组赋值给该变量</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">a, b, *c = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span></div><div class="line"><span class="comment"># a = 1  b = 2  c = [3, 4, 5]</span></div><div class="line"></div><div class="line">a, *b, c = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span></div><div class="line"><span class="comment"># a = 1  b = [2, 3, 4]  c = 5</span></div></pre></td></tr></table></figure>
<h3 id="4-6-2-置换变量的值"><a href="#4-6-2-置换变量的值" class="headerlink" title="4.6.2 置换变量的值"></a>4.6.2 置换变量的值</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">a, b = <span class="number">0</span>, <span class="number">1</span></div><div class="line">tmp = a <span class="comment"># 暂时保存变量a的值</span></div><div class="line">a = b   <span class="comment"># 将变量b的值赋值给a</span></div><div class="line">b = tmp <span class="comment"># 将原本变量a的值赋值给变量b</span></div><div class="line">p a, b  <span class="comment"># =&gt; [1, 0]</span></div></pre></td></tr></table></figure>
<p>使用多重赋值，只需一行程序就搞定了。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">a, b = <span class="number">0</span>, <span class="number">1</span></div><div class="line">a, b = b, a <span class="comment"># 置换变量a、b的值</span></div><div class="line">p a, b      <span class="comment"># [1, 0]</span></div></pre></td></tr></table></figure>
<h3 id="4-6-3-获取数组的元素"><a href="#4-6-3-获取数组的元素" class="headerlink" title="4.6.3 获取数组的元素"></a>4.6.3 获取数组的元素</h3><p>用数组赋值，左边有多个变量时，Ruby 会自动获取数组的元素进行多重赋值。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ary = [<span class="number">1</span>, <span class="number">2</span>]</div><div class="line">a, b = ary</div><div class="line">p a     <span class="comment"># =&gt; 1</span></div><div class="line">p b     <span class="comment"># =&gt; 2</span></div></pre></td></tr></table></figure>
<h3 id="4-6-4-获取嵌套数组的元素"><a href="#4-6-4-获取嵌套数组的元素" class="headerlink" title="4.6.4 获取嵌套数组的元素"></a>4.6.4 获取嵌套数组的元素</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ary = [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>]</div><div class="line">a, b, c = ary</div><div class="line">p a  <span class="comment"># =&gt; 1</span></div><div class="line">p b  <span class="comment"># =&gt; [2, 3]</span></div><div class="line">p c  <span class="comment"># =&gt; 4</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">ary = [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>]</div><div class="line">a, (b1, b2), c = ary  <span class="comment"># 对与数组结构相对应的变量赋值</span></div><div class="line">p a   <span class="comment"># =&gt; 1</span></div><div class="line">p b1  <span class="comment"># =&gt; 2</span></div><div class="line">p b2  <span class="comment"># =&gt; 3</span></div><div class="line">p c   <span class="comment"># =&gt; 4</span></div></pre></td></tr></table></figure>
<p>只要等号左边的变量的结构与数组的结构一致，即使再复杂的结构，多重赋值都可以轻松对应。</p>
<p>专栏</p>
<p>以变量名开头来决定变量的种类，这是 Ruby 中对变量命名时唯一要坚决遵守的规则。</p>
<p>◎ 不要过多使用省略的名称</p>
<p>◎ <strong>对于多个单词组合的变量名，使用 _ 隔开各个单词</strong>，或者单词以大写字母开头<br>   Ruby 的变量名和方法名使用前者，类名和模块名使用后者。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">陈云莉 m18301662790@gmail.com</p>
              <p class="site-description motion-element" itemprop="description">记录一些技术点，留下一些生活感悟</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">58</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">21</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">陈云莉 m18301662790@gmail.com</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  

    
      <script id="dsq-count-scr" src="https://chenyunli.disqus.com/count.js" async></script>
    

    

  




	





  










  





  

  

  

  

  

  

</body>
</html>
